(function(e){function t(t){for(var a,o,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)o=r[u],n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-card-designer-dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var a=i("64a9"),n=i.n(a);n.a},1608:function(e,t,i){},"17ba":function(e,t,i){"use strict";var a=i("ad48"),n=i.n(a);n.a},"1b62":function(e,t,i){"use strict";i("28a5"),i("a481"),i("4917");var a=i("db72"),n=(i("6b54"),i("7f7f"),i("a078")),s=i("ebfa"),o=n["a"].debug,r=n["a"].env,l={data:function(){return{debug:o,env:r}},mounted:function(){this.$logger=new s["a"](this.$options.name)},computed:{devMode:function(){return"development"===this.env}},methods:{strToNum:function(e){return c(e)},strPaddingLeft:function(e,t){return e.toString().length>=t?e.toString():this.strPaddingLeft("0"+e,t)},log:function(e){this.$logger.log(e)},randomID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=Math.round(Math.random()*Math.pow(10,e));return this.strPaddingLeft(t,e)},toasting:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$toasted.show(e,Object(a["a"])({},t))}}},c=function(e){var t,i=/(\d{1,3})(\d{3}(?:,|$))/;do{t=(t||e.split(".")[0]).replace(i,"$1,$2")}while(t.match(i));return e.split(".")[1]?t.concat(".",e.split(".")[1]):t},d=n["a"].rootDirectory,u={data:function(){return{base:d,host:window.location.host}},methods:{assetPath:function(e){if(e)return e="/"===e.substr(0,1)?0==e.indexOf(this.base)?e.slice(1):e.slice(this.base.length):e,this.base+e},assetBgImage:function(e){return e?"http"!==e.substr(0,4)?"background-image: url('".concat(this.assetPath(e),"')"):"background-image: url('".concat(e,"')"):"background-image: url('".concat(this.assetPath("/static/images/empty_pic.jpg"),"')")}}},p=(i("7514"),i("2f62")),f={data:function(){return{storeMsg:"Hello"}},computed:Object(a["a"])({},Object(p["d"])({userId:function(e){return e.userId},activePageId:function(e){return e.activePageId},pages:function(e){return e.pages},selectedPage:function(e){return e.activePageId<0?{}:e.pages.find(function(t){return t._id===e.activePageId})},selectedId:function(e){return e.selectedId},sketchWidgets:function(e){return e.pages.find(function(t){return t._id==e.activePageId}).widgets},selectedWidget:function(e){if(e.selectedId<0)return{};var t=e.pages.find(function(t){return t._id==e.activePageId}).widgets;return t.find(function(t){return t._id==e.selectedId})},selectedIds:function(e){return e.selectedIds},canUndo:function(e){return e.past.length},canRedo:function(e){return e.future.length}})),methods:Object(a["a"])({},Object(p["b"])(["addPage","clonePage","selectPage","deletePage","addWidget","cloneWidget","selectWidget","deleteWidget","saveChange","undo","redo"]),{confirmDeleteWidget:function(){var e=confirm("確定刪除元件？");e&&this.deleteWidget()},showSelectedWidget:function(){this.$logger.log(this.selectedWidget)},showWidgets:function(){this.$logger.log(this.sketchWidgets)}})},v=(i("c5f6"),{data:function(){return{animationTimer:null,animatedClass:!1}},props:{val:{type:Object},pageIndex:{type:Number,default:0}},computed:Object(a["a"])({},Object(p["d"])({selectedId:function(e){return e.selectedId},editing:function(e){return e.editing},previewing:function(e){return e.previewing},previewIndex:function(e){return e.previewIndex}}),{currentPreview:function(){return!this.previewing||this.previewIndex===this.pageIndex}}),methods:{updateText:function(e,t){var i=e.target.innerHTML;this.$store.dispatch("updateSelectedWidget",{id:t,key:"text",value:i})},creatAnimationTimer:function(){var e=this;window.clearTimeout(this.animationTimer),this.animatedClass=!0,this.val.circulation||(this.animationTimer=setTimeout(function(){e.animatedClass=!1},this.val.speed))}},watch:{"val.animation":function(e){e&&this.creatAnimationTimer()},"val.circulation":function(e){e&&this.creatAnimationTimer()}}}),g=(i("4360"),{data:function(){return{}},computed:Object(a["a"])({},Object(p["d"])({editing:function(e){return e.editing}})),methods:{handleKeyup:function(e){switch(this.moveDirection(e),e.keyCode){case 27:-1!=this.selectedId&&(this.$store.commit("updateData",{key:"editing",value:!1}),this.selectWidget(-1));break}},moveDirection:function(e){var t,i;switch(e.keyCode){case 38:t="top",i=-1;break;case 39:t="left",i=1;break;case 40:t="top",i=1;break;case 37:t="left",i=-1;break}t&&this.$store.dispatch("updateSelectedWidget",{key:t,value:this.selectedWidget[t]+i})},handleKeydown:function(e){this.editing}},watch:{selectedId:function(e,t){e>=0&&e!=t?(document.body.addEventListener("keydown",this.handleKeydown,!0),document.body.addEventListener("keyup",this.handleKeyup,!0)):(document.body.removeEventListener("keydown",this.handleKeydown,!0),document.body.removeEventListener("keyup",this.handleKeyup,!0))}}}),m=(i("ac6a"),i("20d6"),i("bb84")),h={data:function(){return{widgets:m["a"],currentPage:0,swiper:null}},props:{published:{type:Boolean,default:!1}},mounted:function(){this.currentPage=0},beforeDestroy:function(){this.currentPage=0},computed:Object(a["a"])({},Object(p["d"])({projectUUID:function(e){return e.projectUUID},zoom:function(e){return e.zoom},previewing:function(e){return e.previewing},pages:function(e){return e.pages},canvasWidth:function(e){return e.canvasWidth},canvasHeight:function(e){return e.canvasHeight},pageDirection:function(e){return e.project.pageDirection}}),{swiperIndex:function(){return this.previewing&&this.swiper?this.swiper.activeIndex:0},swiperOption:function(){return{direction:"disabled"!==this.pageDirection?this.pageDirection:"vertical",threshold:5,noSwiping:"disabled"===this.pageDirection}}}),methods:{pageWidgetsReverse:function(e){return e.slice().reverse()},closePreviewer:function(){this.$store.commit("updateData",{key:"previewing",value:!1})},switchPage:function(e){this.currentPage+=e},handleSwiperHref:function(e){var t=e.currentTarget.getAttribute("href");if("#"==t.slice(0,1)){e.preventDefault();var i=this.pages.findIndex(function(e){return e.title===t.slice(1)});this.swiper.slideTo(i,10)}}},watch:{previewing:function(e){var t=this;this.currentPage=0,e&&this.$nextTick(function(){t.swiper=t.$refs.previewswiper.swiper,t.$refs.previewswiper.$el.querySelectorAll("a").forEach(function(e){e.addEventListener("click",t.handleSwiperHref)})})},swiperIndex:function(e,t){e!=t&&this.$store.commit("updateData",{key:"previewIndex",value:e})}}};i.d(t,"a",function(){return l}),i.d(t,"c",function(){return u}),i.d(t,"d",function(){return f}),i.d(t,"f",function(){return v}),i.d(t,"b",function(){return g}),i.d(t,"e",function(){return h})},"29eb":function(e,t,i){"use strict";var a=i("ab86"),n=i.n(a);n.a},"3dfd":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.tokenPass?i("router-view"):e._e()],1)},n=[],s={name:"App",data:function(){return{tokenPass:!1}},created:function(){var e=this;if(this.devMode)this.tokenPass=!0;else{var t=document.head.querySelector('meta[name="csrf-token"]').content;"http"===window.location.protocol.slice(0,4)&&this.$http.get("/refresh-csrf").then(function(i){i.data==t?e.tokenPass=!0:logger.log("no token")})}}},o=s,r=(i("034f"),i("2877")),l=Object(r["a"])(o,a,n,!1,null,null,null);t["a"]=l.exports},4360:function(e,t,i){"use strict";var a={};i.r(a),i.d(a,"getCount",function(){return x});var n={};i.r(n),i.d(n,"updateData",function(){return _}),i.d(n,"saveChange",function(){return y});var s,o,r,l,c,d,u=i("db72"),p=i("a026"),f=i("2f62"),v=i("bd86"),g=i("b7f9"),m=(s={},Object(v["a"])(s,g["p"],function(e){if(window.localStorage.getItem("pageData")){var t=JSON.parse(window.localStorage.getItem("pageData"));e.pages=t,e.activePageId=t[0]._id;var i=JSON.parse(window.localStorage.getItem("projectData"));e.project=i;var a=i.isPublished,n=i.privacyId;1==a&&1==n&&(e.viewPass=!0),window.console.log("Initialise Page data Success")}}),Object(v["a"])(s,g["y"],function(e){var t=e.pages,i=e.project;window.localStorage.setItem("pageData",JSON.stringify(t)),window.localStorage.setItem("projectData",JSON.stringify(i)),p["default"].toasted.show("Save Project Success!",{icon:"check"}),e.fetching=!1}),Object(v["a"])(s,g["e"],function(e){window.localStorage.removeItem("pageData"),window.localStorage.removeItem("projectData"),e.pages=[{_id:"000001",title:"page-01",bgColor:"#ffffff",widgets:[]}],e.activePageId="000001",e.selectedId=-1,p["default"].toasted.show("Clear Project Success!",{icon:"check"})}),s),h=Object(u["a"])({},m,{updateData:function(e,t){var i=t.key,a=t.value;e[i]=a},updateProject:function(e,t){var i=t.key,a=t.value;e.project[i]=a},addPicture:function(e,t){e.pictures=e.pictures.concat(t)},selectWidgets:function(e,t){e.selectedIds=t}}),b=h,w={canvasWidth:500,canvasHeight:750,zoom:100,pictures:[]},C=w,x=function(e){return e.count},_=function(e,t){var i=e.commit;i("updateData",t)},y=function(e,t){var i=e.commit;i("saveChange",t)},O=i("75fc"),I=(i("7514"),i("20d6"),function(e){return function(t,i){var a=t.commit,n=t.dispatch,s=t.state;a(g["t"]),e({commit:a,dispatch:n,state:s},i)}}),j=I,k=i("ce96"),P={state:{pages:[{_id:"000001",title:"page-01",bgColor:"#ffffff",widgets:[],groups:[]}],activePageId:"000001"},mutations:(o={},Object(v["a"])(o,g["a"],function(e,t){var i=e.pages.findIndex(function(t){return t._id===e.activePageId});i<0?e.pages.push(t):e.pages.splice(i+1,0,t),e.zoom=100}),Object(v["a"])(o,g["A"],function(e,t){e.activePageId=t;var i=e.pages.findIndex(function(t){return t._id===e.activePageId});e.activeWidgets=[],e.activeWidgets=e.pages[i].widgets}),Object(v["a"])(o,g["g"],function(e){var t=Object(k["e"])(),i=e.pages.find(function(t){return t._id===e.activePageId}),a=Object(u["a"])({},i,{widgets:Object(O["a"])(i.widgets),_id:t});this.commit(g["a"],a),this.commit(g["A"],t)}),Object(v["a"])(o,g["h"],function(e){var t=e.pages.findIndex(function(t){return t._id==e.activePageId});e.pages.splice(t,1),e.activePageId=0!=t?e.pages[t-1]._id:e.pages[0]._id}),Object(v["a"])(o,g["G"],function(e,t){e.pages=t}),Object(v["a"])(o,g["H"],function(e,t){var i=t.key,a=t.value,n=e.pages.findIndex(function(t){return t._id===e.activePageId});n<0||(e.pages[n][i]=a)}),o),actions:{addPage:j(function(e,t){var i=e.commit;i(g["B"],-1),i("updateData",{key:"selectedIds",value:[]}),i(g["a"],t),i(g["A"],t._id)}),selectPage:j(function(e,t){var i=e.commit;i(g["B"],-1),i("updateData",{key:"selectedIds",value:[]}),i(g["A"],t)}),clonePage:j(function(e){var t=e.commit;t(g["B"],-1),t(g["g"])}),deletePage:j(function(e){var t=e.commit;t(g["B"],-1),t(g["h"])}),updatePages:j(function(e,t){var i=e.commit;i(g["G"],t)}),updateSelectedPage:j(function(e,t){var i=e.commit;i(g["H"],t)})},getters:{}},S=(i("ac6a"),i("2fdb"),i("6762"),{state:{activeWidgets:[],selectedId:-1,selectedIds:[],widgetOrigin:{}},mutations:(r={},Object(v["a"])(r,g["b"],function(e,t){e.activeWidgets.unshift(t)}),Object(v["a"])(r,g["B"],function(e,t){e.selectedId=t}),Object(v["a"])(r,g["i"],function(e){var t=e.activeWidgets.findIndex(function(t){return t._id===e.selectedId});e.activeWidgets.splice(t,1),e.selectedId=-1}),Object(v["a"])(r,g["J"],function(e,t){var i=e.pages.findIndex(function(t){return t._id===e.activePageId});e.pages[i].widgets=t,e.activeWidgets=t}),Object(v["a"])(r,g["I"],function(e,t){var i=t.id,a=t.key,n=t.value,s=t.index,o=i||e.selectedId,r=e.pages.findIndex(function(t){return t._id===e.activePageId}),l=e.activeWidgets.findIndex(function(e){return e._id===o});l<0||(void 0!==s?e.pages[r].widgets[l][a][s]=n:e.pages[r].widgets[l][a]=n)}),Object(v["a"])(r,g["E"],function(e,t){var i=e.activeWidgets.find(function(e){return e._id===t});i&&p["default"].set(e.widgetOrigin,t,{originLeft:i.left,originTop:i.top,originWidth:i.width,originHeight:i.height})}),Object(v["a"])(r,g["f"],function(e){e.widgetOrigin={}}),Object(v["a"])(r,g["z"],function(e,t){var i=t.x,a=t.y,n=e.pages.findIndex(function(t){return t._id===e.activePageId}),s=100/e.zoom,o=i-e.screenX,r=a-e.screenY,l=e.startX-e.screenX,c=e.startY-e.screenY,d={left:Math.min(l,o)*s,top:Math.min(c,r)*s,width:Math.abs(o-l)*s,height:Math.abs(r-c)*s},u=[],p=e.pages[n].widgets.filter(function(e){var t=Object(k["g"])(e);if(Object(k["h"])(t,d))return e.groupId&&u.push(e.groupId),!0}).map(function(e){return e._id}),f=e.pages[n].widgets.filter(function(e){return u.includes(e.groupId)}).map(function(e){return e._id});e.selectedIds=[].concat(Object(O["a"])(p),Object(O["a"])(f)),e.controlType="multi-select"}),Object(v["a"])(r,g["D"],function(e){e.widgetOrigin={},e.activeWidgets.filter(function(t){return e.selectedIds.includes(t._id)}).reduce(function(e,t){return Object(u["a"])({},e,Object(v["a"])({},t._id,{originX:t.left,originY:t.top,originLeft:t.left,originTop:t.top}))},{})}),Object(v["a"])(r,g["C"],function(e,t){var i=t.id,a=t.groupId,n=e.activeWidgets.findIndex(function(e){return e._id===i});e.activeWidgets[n].groupId=a}),r),actions:{addWidget:j(function(e,t){var i=e.commit;i(g["b"],t),i(g["B"],t._id),i(g["E"],t._id)}),selectWidget:j(function(e,t){var i=e.commit;i(g["B"],t),t>-1&&i(g["E"],t)}),cloneWidget:j(function(e){var t=e.commit,i=e.state,a=Object(k["e"])(),n=i.activeWidgets.find(function(e){return e._id===i.selectedId}),s=Object(u["a"])({},JSON.parse(JSON.stringify(n)),{_id:a,left:n.left+20,top:n.top+20});t(g["b"],s),t(g["B"],a),t(g["E"],a)}),deleteWidget:j(function(e){var t=e.commit;t(g["i"])}),updateWidgets:j(function(e,t){var i=e.commit;i(g["J"],t)}),updateSelectedWidget:j(function(e,t){var i=e.commit;i(g["I"],t)}),updatePicture:j(function(e,t){var i=e.commit;t.forEach(function(e){i(g["I"],e)})}),selectMultiWidget:function(e,t){var i=e.commit,a=e.state,n=e.dispatch,s=t.x,o=t.y;new Promise(function(e,t){i(g["z"],{x:s,y:o}),e(a)}).then(function(){n("setMultiWidgetOrigin")})},setMultiWidgetOrigin:function(e){var t=e.commit,i=e.state;t(g["f"]),i.selectedIds.forEach(function(e){t(g["E"],e)})},groupWidgets:j(function(e,t){var i=e.commit,a=e.state;a.selectedIds.forEach(function(e){i(g["C"],{id:e,groupId:t})})}),selectGroup:function(e,t){var i=e.commit,a=e.state,n=e.dispatch,s=a.activeWidgets.filter(function(e){return e.groupId==t}).map(function(e){return e._id});new Promise(function(e,t){i("updateData",{key:"selectedIds",value:s}),e(a)}).then(function(){n("setMultiWidgetOrigin")})}},getters:{multiSelectArea:function(e){var t=e.activeWidgets.filter(function(t){return e.selectedIds.includes(t._id)}).reduce(function(e,t){return Object(k["c"])(e,t)},null);return t},canGroup:function(e){var t=e.selectedIds,i=e.activeWidgets;return!t.map(function(e){var t=i.find(function(t){return t._id===e});return t.groupId}).reduce(function(e,t,i){return i?t===e&&e:t},null)},selectedGroups:function(e){var t=e.selectedIds,i=e.activeWidgets;return t.map(function(e){var t=i.find(function(t){return t._id===e});return t.groupId}).filter(function(e,t,i){return e&&i.indexOf(e)===t})}}}),W=i("a8db"),z={state:{moving:!1,controlType:"",editing:!1,screenX:0,screenY:0,startX:0,startY:0,originX:0,originY:0,originTop:0,originLeft:0,originWidth:0,originHeight:0},mutations:(l={},Object(v["a"])(l,g["o"],function(e,t){var i=t.x,a=t.y;e.screenX=i,e.screenY=a}),Object(v["a"])(l,g["m"],function(e,t){var i=t.startX,a=t.startY,n=Object(W["a"])(t,["startX","startY"]);e.startX=i,e.startY=a,e.moving=!0,e.originTop=n.originTop||0,e.originLeft=n.originLeft||0,e.originWidth=n.originWidth||0,e.originHeight=n.originHeight||0}),Object(v["a"])(l,g["r"],function(e,t){var i=t.x,a=t.y,n=t.id,s=e.activeWidgets.findIndex(function(e){return e._id===n}),o=e.widgetOrigin[n],r=o.originLeft,l=o.originTop,c=100/e.zoom,d=(i-e.startX)*c+r,u=(a-e.startY)*c+l;e.controlType="move",e.activeWidgets[s].left=d,e.activeWidgets[s].top=u}),Object(v["a"])(l,g["v"],function(e,t){var i=t.x,a=t.y,n=t.direction,s=t.id,o=e.pages.findIndex(function(t){return t._id===e.activePageId}),r=e.pages[o].widgets.findIndex(function(e){return e._id===s}),l=e.pages[o].widgets[r],c=l.left,d=l.top,f=l.width,v=l.height,g=l.rotation,m=e.widgetOrigin[s],h=m.originTop,b=m.originLeft,w=m.originWidth,C=m.originHeight,x="left top",_=10,y=0,O=i-e.startX,I=a-e.startY,j=Object(k["a"])(w,C)-g,P=Object(k["d"])(w/2,C/2),S=Object(k["d"])(O,I),W=Object(k["a"])(-I,O),z=100/e.zoom;if(c=Math.round(b+w/2-P*Object(k["f"])(j)),d=Math.round(h+C/2-P*Object(k["b"])(j)),"right"===n&&(y=w+S*Object(k["b"])(W+g)*z,f=y>_?y:_),"bottom"===n&&(y=C+S*Object(k["b"])(W+g+90)*z,v=y>_?y:_),"left"===n){var $=Math.round(S*Object(k["b"])(W+g+180))*z;y=w+$,f=y>_?y:_;var D=Math.round(-$*Object(k["b"])(g)),E=Math.round(-$*Object(k["f"])(g)),M=Math.round((w-_)*Object(k["b"])(g)),T=Math.round((w-_)*Object(k["f"])(g));D=M>=0?Math.min(M,D):Math.max(M,D),E=T>=0?Math.min(T,E):Math.max(T,E),c+=D,d+=E}if("top"===n){var A=S*Object(k["b"])(W+g-90)*z;y=C+A,v=y>_?y:_;var H=Math.round(-A*Object(k["f"])(g)),R=Math.round(-A*Object(k["b"])(g)),U=Math.round((C-_)*Object(k["f"])(g)),N=Math.round((C-_)*Object(k["b"])(g));H=U>=0?Math.min(U,H):Math.max(U,H),R=N>=0?Math.min(N,R):Math.max(N,R),c-=H,d+=R}if("left top"===n){var q=S*Object(k["b"])(W+g+180)*z,L=C/w*q;y=w+q,f=y>_?y:_,v=C+L>_*C/w?C+L:_*C/w;var X=Math.round(-q*Object(k["b"])(g)- -L*Object(k["f"])(g)),Y=Math.round(-q*Object(k["f"])(g)+-L*Object(k["b"])(g)),G=Math.round((w-_)*Object(k["b"])(g)-(C-_*C/w)*Object(k["f"])(g)),J=Math.round((w-_)*Object(k["f"])(g)+(C-_*C/w)*Object(k["b"])(g));X=G>=0?Math.min(G,X):Math.max(G,X),Y=J>=0?Math.min(J,Y):Math.max(J,Y),c+=X,d+=Y}if("left bottom"===n){var V=S*Object(k["b"])(W+g+180)*z,B=C/w*V;y=w+V,f=y>_?y:_,v=C+B>_*C/w?C+B:_*C/w;var F=Math.round(-V*Object(k["b"])(g)),K=Math.round(-V*Object(k["f"])(g)),Q=Math.round((w-_)*Object(k["b"])(g)),Z=Math.round((w-_)*Object(k["f"])(g));F=Q>=0?Math.min(Q,F):Math.max(Q,F),K=Z>=0?Math.min(Z,K):Math.max(Z,K),c+=F,d+=K}if("right top"===n){var ee=S*Object(k["b"])(W+g)*z,te=C/w*ee;y=w+ee,f=y>_?y:_,v=C+te>_*C/w?C+te:_*C/w;var ie=Math.round(-te*Object(k["b"])(g+90)),ae=Math.round(-te*Object(k["f"])(g+90)),ne=Math.round((C-_*C/w)*Object(k["b"])(g+90)),se=Math.round((C-_*C/w)*Object(k["f"])(g+90));ie=ne>=0?Math.min(ne,ie):Math.max(ne,ie),ae=se>=0?Math.min(se,ae):Math.max(se,ae),c+=ie,d+=ae}if("right bottom"===n){var oe=S*Object(k["b"])(W+g)*z,re=C/w*oe;y=w+oe,f=y>_?y:_,v=C+re>_*C/w?C+re:_*C/w}e.controlType="resize",e.direction=n,p["default"].set(e.pages[o].widgets,r,Object(u["a"])({},e.pages[o].widgets[r],{left:c,top:d,width:f,height:v,transformOrigin:x}))}),Object(v["a"])(l,g["w"],function(e,t){var i=t.x,a=t.y,n=t.id,s=e.pages.findIndex(function(t){return t._id===e.activePageId}),o=e.pages[s].widgets.findIndex(function(e){return e._id===n}),r=e.pages[s].widgets[o],l=document.querySelector('[data-id="'.concat(r._id,'"][data-type="').concat(r.type,'"]')),c=l.getBoundingClientRect(),d=c.width,f=c.height,v=c.left,g=c.top,m=i-(v+d/2),h=a-(g+f/2),b=Math.round(Object(k["a"])(h,m)-90);b=b<0?b+360:b,e.controlType="rotate",p["default"].set(e.pages[s].widgets,o,Object(u["a"])({},r,{rotation:b,transformOrigin:"center center"}))}),Object(v["a"])(l,g["j"],function(e,t){if(t&&t>-1){var i=e.pages.findIndex(function(t){return t._id===e.activePageId}),a=e.pages[i].widgets.findIndex(function(e){return e._id===t}),n=e.pages[i].widgets[a],s=n.left,o=n.top,r=n.width,l=n.height,c=n.rotation,d="center center";if(r=Math.round(r),l=Math.round(l),"resize"==e.controlType){var f=Object(k["a"])(r/2,l/2)-c,v=Object(k["d"])(r/2,l/2),g=Math.round(s-r/2+v*Object(k["f"])(f)),m=Math.round(o-l/2+v*Object(k["b"])(f));o=m,s=g}p["default"].set(e.pages[i].widgets,a,Object(u["a"])({},e.pages[i].widgets[a],{width:r,height:l,top:o,left:s,transformOrigin:d}))}e.controlType="",e.moving=!1}),l),actions:{moveMultiWidget:function(e,t){var i=e.commit,a=e.state,n=t.x,s=t.y;a.selectedIds.forEach(function(e){i(g["r"],{x:n,y:s,id:e})})},resizeMultiWidget:function(e,t){var i=e.commit,a=e.state,n=t.x,s=t.y,o=t.direction;a.selectedIds.forEach(function(e){i(g["v"],{x:n,y:s,direction:o,id:e})})},endMultiWidgetControl:function(e){var t=e.commit,i=e.state;i.selectedIds.forEach(function(e){t(g["j"],e)})}},getters:{}},$={state:{past:[],future:[]},mutations:(c={},Object(v["a"])(c,g["F"],function(e){var t=e.past,i=e.future,a=e.activePageId,n=e.selectedId,s=e.selectedIds,o=e.widgetOrigin,r={pages:JSON.parse(JSON.stringify(e.pages)),activePageId:a,selectedId:n,selectedIds:Object(O["a"])(s),widgetOrigin:Object(u["a"])({},o)},l=t[t.length-1],c=t.slice(0,t.length-1);e.past=c,e.future=[r].concat(Object(O["a"])(i)),e.pages=l.pages,e.activePageId=l.activePageId;var d=l.pages.findIndex(function(e){return e._id===l.activePageId});e.activeWidgets=l.pages[d].widgets,e.selectedId=l.selectedId,e.selectedIds=l.selectedIds,e.widgetOrigin=l.widgetOrigin}),Object(v["a"])(c,g["u"],function(e){var t=e.past,i=e.future,a=e.activePageId,n=e.selectedId,s=e.selectedIds,o=e.widgetOrigin,r={pages:JSON.parse(JSON.stringify(e.pages)),activePageId:a,selectedId:n,selectedIds:Object(O["a"])(s),widgetOrigin:Object(u["a"])({},o)},l=i[0],c=i.slice(1);e.past=[].concat(Object(O["a"])(t),[r]),e.future=c,e.pages=l.pages,e.activePageId=l.activePageId;var d=l.pages.findIndex(function(e){return e._id===l.activePageId});e.activeWidgets=l.pages[d].widgets,e.selectedId=l.selectedId,e.selectedIds=l.selectedIds,e.widgetOrigin=l.widgetOrigin}),Object(v["a"])(c,g["t"],function(e){var t=e.past,i=e.activePageId,a=e.selectedId,n=e.pages,s=e.selectedIds,o=e.widgetOrigin,r={pages:JSON.parse(JSON.stringify(n)),activePageId:i,selectedId:a,selectedIds:Object(O["a"])(s),widgetOrigin:Object(u["a"])({},o)},l=t[t.length-1];JSON.stringify(r)==JSON.stringify(l)||(e.past=[].concat(Object(O["a"])(e.past),[r]),e.future=[])}),Object(v["a"])(c,g["c"],function(e){e.past=[],e.future=[]}),c),actions:{undo:function(e){var t=e.commit;t(g["F"])},redo:function(e){var t=e.commit;t(g["u"])},cleanStep:function(e){var t=e.commit;t(g["c"])},recordStepAction:j},getters:{}},D=i("bc3a"),E=i.n(D),M=i("ebfa"),T=new M["a"],A={state:{fetching:!1,fetchType:"",previewing:!1,previewIndex:0,viewPass:!1,userId:"",projectUUID:"",project:{name:"New Project",description:"my project description",privacyId:1,password:"",bannerPhoto:"",pageDirection:"vertical",isPublished:-1}},mutations:(d={},Object(v["a"])(d,g["n"],function(e,t){var i=t.projectUUID,a=void 0===i?null:i,n=t.contentJSON,s=void 0===n?{}:n,o=t.pictures,r=void 0===o?[]:o,l=t.projectOptions,c=void 0===l?{}:l,d=c.isPublished,u=c.privacyId;e.projectUUID=a,e.pages=s,e.activePageId=s[0]._id,e.pictures=r,e.project=c,e.fetching=!1,1==d&&1==u&&(e.viewPass=!0),"fetchProject"===e.fetchType&&p["default"].toasted.show("Server get Project Success!",{icon:"check"})}),Object(v["a"])(d,g["x"],function(e,t){var i=t.projectUUID,a=t.project;e.projectUUID=i,e.project=a,e.fetching=!1,p["default"].toasted.show("Server Save Project Success!",{icon:"check"})}),Object(v["a"])(d,g["d"],function(e){e.pages=[{_id:"000001",widgets:[]}],e.activePageId="000001",e.selectedId=-1,p["default"].toasted.show("Server Clear Project Success!",{icon:"check"})}),Object(v["a"])(d,g["q"],function(e,t){var i=t.userId;e.userId=i,e.fetching=!1,T.log("init user")}),Object(v["a"])(d,g["l"],function(e,t){var i=t.fetchType,a=void 0===i?"":i;e.fetching=!0,e.fetchType=a}),Object(v["a"])(d,g["k"],function(e){e.fetching=!1}),Object(v["a"])(d,g["s"],function(e){e.viewPass=!0,e.fetching=!1}),d),actions:{fetchUser:function(e){var t=e.commit;if(t(g["l"],{fetchType:"fetchUserId"}),window.pageData&&window.pageData.user){var i=window.pageData.user.id;T.log("userId: ".concat(i)),t(g["q"],{userId:i})}else t(g["q"],{userId:0})},fetchProject:function(e,t){var i=e.commit,a=t.userId,n=t.projectUUID;i(g["l"],{fetchType:"fetchProject"}),E.a.post("/create/getProjectDo",{userId:a,projectUUID:n}).then(function(e){var t=e.data;switch(T.log(t),t.responseCode){case 1:i(g["n"],{projectUUID:t.projectUUID,contentJSON:JSON.parse(t.contentJSON),projectOptions:t.projectOptions,pictures:t.photos}),i(g["A"],JSON.parse(t.contentJSON)[0]._id);break;case 2:}}).catch(function(e){T.log("error"),T.log(e)})},saveProject:function(e,t){var i=e.commit,a=t.userId,n=t.projectUUID,s=t.contentJSON,o=t.projectOptions;T.log("savingProject"),i(g["l"],{fetchType:"saving"}),E.a.post("/create/saveProjectDo",{userId:a,projectUUID:n||"",projectOptions:o||{},contentJSON:s}).then(function(e){var t=e.data;switch(T.log(t),t.responseCode){case 1:i(g["x"],{projectUUID:t.projectUUID,project:o});break}}).catch(function(e){T.log("error"),T.log(e)})},fetchPublishProject:function(e,t){var i=e.commit,a=t.userId,n=t.projectUUID;i(g["l"],{fetchType:"fetchPublishProject"}),E.a.post("/view/getProjectDo",{userId:a,projectUUID:n}).then(function(e){var t=e.data;switch(t.responseCode){case 1:i(g["n"],{projectUUID:t.projectUUID,contentJSON:JSON.parse(t.contentJSON),projectOptions:t.projectOptions,pictures:[]});break;default:i(g["n"],{projectUUID:t.projectUUID,contentJSON:{},projectOptions:{isPublished:-1},pictures:[]})}}).catch(function(e){T.log("error"),T.log(e)})},submitProjectForm:function(e,t){var i=e.commit,a=t.requestData;i(g["l"],{fetchType:"submitProject"}),E.a.post("/view/submitFormDo",a).then(function(e){var t=e.data;switch(T.log(t),i(g["k"]),t.responseCode){case 1:p["default"].toasted.show("成功提交!",{icon:"check"});break;case 2:p["default"].toasted.show("資料不全。",{icon:"clear"});break;case 3:p["default"].toasted.show("重複提交表單，請重新整理頁面",{icon:"clear"});break;case 4:p["default"].toasted.show("邀卡不存在",{icon:"clear"});break}}).catch(function(e){T.log("error"),T.log(e)})},checkPasswordDo:function(e,t){var i=e.commit,a=t.password,n=t.projectUUID;i(g["l"],{fetchType:"submitProject"}),E.a.post("/view/checkPasswordDo",{password:a,projectUUID:n}).then(function(e){var t=e.data;switch(T.log(t),t.responseCode){case 1:i(g["s"]),p["default"].toasted.show("Password match!",{icon:"check"});break;case 2:p["default"].toasted.show("Wrong password!",{icon:"clear"});break}}).catch(function(e){T.log("error"),T.log(e)})}},getters:{}};p["default"].use(f["a"]);t["a"]=new f["a"].Store({state:Object(u["a"])({},C,{},JSON.parse(JSON.stringify(P.state)),{},JSON.parse(JSON.stringify(S.state)),{},JSON.parse(JSON.stringify(z.state)),{},JSON.parse(JSON.stringify($.state)),{},JSON.parse(JSON.stringify(A.state))),mutations:Object(u["a"])({},b,{},P.mutations,{},S.mutations,{},z.mutations,{},$.mutations,{},A.mutations),actions:Object(u["a"])({},n,{},P.actions,{},S.actions,{},z.actions,{},$.actions,{},A.actions),getters:Object(u["a"])({},a,{},S.getters)})},4371:function(e,t,i){"use strict";var a=i("80c9"),n=i.n(a);n.a},"52b7":function(e,t,i){"use strict";var a=i("1608"),n=i.n(a);n.a},"56d7":function(e,t,i){"use strict";i.r(t),function(e){i("456d"),i("ac6a"),i("cadf"),i("551c"),i("f751"),i("097d");var t=i("a026"),a=i("bc3a"),n=i.n(a),s=i("a7fe"),o=i.n(s),r=i("a65d"),l=i.n(r),c=(i("4989"),i("ad3d")),d=i("3f08"),u=i("70fb"),p=i.n(u),f=i("3dfd"),v=i("a18c"),g=i("4360"),m=i("ebfa"),h=i("6409"),b=i("1b62"),w=(i("3e39"),i("f818"),i("e80e"),i("77ed"),i("0785"),i("bb84"));e.logger=new m["a"];var C=document.head.querySelector('meta[name="csrf-token"]');C&&(n.a.defaults.headers.common["X-CSRF-TOKEN"]=C.content),t["default"].use(o.a,n.a),t["default"].use(d["a"].Plugin),t["default"].use(p.a),t["default"].use(l.a,{position:"top-center",duration:5e3,action:{text:"close",onClick:function(e,t){t.goAway(0)}}}),t["default"].mixin(b["a"]),t["default"].mixin(b["c"]),t["default"].mixin(b["d"]),Object(h["a"])(),t["default"].component("font-awesome-icon",c["a"]),Object.keys(w["a"]).forEach(function(e){t["default"].component(e,w["a"][e])}),Object.keys(w["b"]).forEach(function(e){t["default"].component(e,w["b"][e])}),t["default"].config.productionTip=!1,new t["default"]({el:"#app",router:v["a"],store:g["a"],components:{App:f["a"]},template:"<App/>",beforeCreate:function(){this.$store.dispatch("fetchUser")}})}.call(this,i("c8ba"))},"626a":function(e,t,i){"use strict";(function(e){var a=i("bd86"),n=(i("7f7f"),i("db72")),s=(i("ac6a"),i("2f62"),i("7212")),o=i("1b62");i("dfa4");t["a"]={name:"PublishViewer",components:{swiper:s["swiper"],swiperSlide:s["swiperSlide"]},mixins:[o["e"]],data:function(){return{windowWidth:window.innerWidth,windowHeight:window.innerHeight,lineId:"",verifyCode:""}},mounted:function(){var e=this;this.currentPage=0,window.addEventListener("resize",this.handleResize),this.receivePageParams(),this.$nextTick(function(){e.swiper=e.$refs.previewswiper.swiper,e.$refs.previewswiper.$el.querySelectorAll("a").forEach(function(t){t.addEventListener("click",e.handleSwiperHref)})})},computed:{viewerSize:function(){var e,t,i,a;if(this.windowWidth>=768)logger.log("greater than 768"),e=.3*this.windowHeight,t=this.windowHeight-e<this.canvasHeight?this.windowHeight-e:this.canvasHeight,i=t===this.canvasHeight?this.canvasWidth:this.canvasWidth/this.canvasHeight*(this.windowHeight-e),a=t===this.canvasHeight?1:(this.windowHeight-e)/this.canvasHeight;else{logger.log("less than 767");var n=0,s=this.windowWidth/(this.windowHeight-n),o=this.canvasWidth/this.canvasHeight;s>=o?(t=this.windowHeight-n,i=this.canvasWidth/this.canvasHeight*(this.windowHeight-n)):(i=this.windowWidth,t=this.canvasHeight/this.canvasWidth*this.windowWidth),a=i/this.canvasWidth}return{width:i,height:t,scale:a}}},methods:{handleResize:function(e){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},submitForm:function(t){var i=e("#viewer-form").serializeArray(),s=i.reduce(function(e,t){return Object(n["a"])({},e,Object(a["a"])({},t.name,e[t.name]?e[t.name]+","+t.value:t.value))},{}),o={projectUUID:this.projectUUID,lineId:this.lineId,verifyCode:this.verifyCode,formData:s};this.$logger.log(o),this.devMode||this.$store.dispatch("submitProjectForm",{requestData:o})},receivePageParams:function(){this.$route.query.ulid&&(this.$logger.log("lineId: ".concat(this.$route.query.ulid)),this.lineId=this.$route.query.ulid),window.pageData&&window.pageData.verifyCode&&(this.$logger.log("verifyCode: ".concat(window.pageData.verifyCode)),this.verifyCode=window.pageData.verifyCode)}}}}).call(this,i("1157"))},6409:function(e,t,i){"use strict";var a=i("ecee"),n=i("c074"),s=i("b702"),o=i("f2d1"),r=function(){a["c"].add(n["c"],n["b"],s["g"],s["c"],n["f"],o["c"],o["f"],o["b"],o["a"],o["d"],o["e"],n["g"],s["f"],s["h"],s["a"],n["l"],n["k"],n["h"],n["e"],n["a"],n["j"],n["m"],n["i"],s["b"],s["d"],s["e"],n["d"])};t["a"]=r},"64a9":function(e,t,i){},"73f8":function(e,t,i){},"7da1":function(e,t,i){},"80c9":function(e,t,i){},"81f2":function(e,t,i){},8458:function(e,t,i){},8540:function(e,t,i){"use strict";var a=i("81f2"),n=i.n(a);n.a},a078:function(e,t,i){"use strict";var a={env:"development",debug:!1,GoogleMapsApiKey:"AIzaSyB7H2tRpMh_TJBBYphuyIQkaLFMI_rW5z8",fbCustomerchatPageID:"264383807440801",rootDirectory:"/vue-card-designer-dist/"};t["a"]=a},a18c:function(e,t,i){"use strict";var a=i("a026"),n=i("8c4f"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("fragment",[i("Header"),i("router-view")],1)},o=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{attrs:{id:"header"}},[i("div",{staticClass:"brand-logo"},[i("a",{attrs:{href:"/"}},[i("img",{attrs:{src:e.assetPath("static/images/logo.png"),alt:"logo"}})])]),i("nav",{attrs:{id:"main-nav"}},[i("ul",{staticClass:"d-flex"},[i("li",{staticClass:"pl-1 pr-4"},[i("h2",{staticClass:"text-lg font-weight-bold"},[e._v(e._s(e.projectName)+" ")])]),i("li",{staticClass:"pl-1"},[i("button",{staticClass:"btn btn-link",attrs:{disabled:!e.canUndo},on:{click:function(t){return t.preventDefault(),e.undo()}}},[i("font-awesome-icon",{attrs:{icon:["fas","undo-alt"]}})],1)]),i("li",{staticClass:"pl-1"},[i("button",{staticClass:"btn btn-link",attrs:{disabled:!e.canRedo},on:{click:function(t){return t.preventDefault(),e.redo()}}},[i("font-awesome-icon",{attrs:{icon:["fas","redo-alt"]}})],1)])])]),i("ul",{staticClass:"ml-auto mr-0 d-flex"},[i("li",{staticClass:"pl-2"},[i("button",{staticClass:"btn btn-outline-info",on:{click:e.projectSetting}},[e._v("專案設定")])]),e.devMode?i("li",{staticClass:"pl-2"},[i("a",{staticClass:"btn btn-success",attrs:{href:"/view",target:"_blank"}},[e._v("發佈(dev)")])]):e._e(),e.devMode?i("li",{staticClass:"pl-2"},[i("button",{staticClass:"btn btn-danger",on:{click:e.clearChange}},[e._v("清除快取(dev)")])]):e._e(),i("li",{staticClass:"pl-2"},[i("button",{staticClass:"btn btn-primary",on:{click:e.activePreviewer}},[e._v("預覽")])]),i("li",{staticClass:"pl-2"},[i("button",{staticClass:"btn btn-success",on:{click:e.saveProejct}},[e._v("儲存專案")])])])])},l=[],c=(i("7f7f"),i("b7f9")),d={name:"Header",data:function(){return{msg:"Welcome to Intro"}},methods:{saveProejct:function(){if("production"==this.env){var e=this.$route.params.projectUUID;this.$store.dispatch("saveProject",{userId:this.userId,projectUUID:e||"",projectOptions:this.$store.state.project,contentJSON:JSON.stringify(this.pages)})}else this.$store.commit(c["y"])},clearChange:function(){this.$store.commit(c["e"])},activePreviewer:function(){this.$store.commit("updateData",{key:"previewing",value:!0})},projectSetting:function(){this.$root.$modal.open()}},computed:{uuid:function(){return this.$store.state.projectUUID},projectName:function(){return this.$store.state.project.name}},watch:{uuid:function(e,t){e!=t&&e&&this.$router.push({name:"Home",params:{projectUUID:e}})}}},u=d,p=i("2877"),f=Object(p["a"])(u,r,l,!1,null,"6047f9e6",null),v=f.exports,g={name:"Front",data:function(){return{}},components:{Header:v}},m=g,h=Object(p["a"])(m,s,o,!1,null,"5582df96",null),b=h.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-view")},C=[],x={name:"PublishView",data:function(){return{}}},_=x,y=Object(p["a"])(_,w,C,!1,null,"1eb2a64d",null),O=y.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"section container-fiuld",attrs:{id:"home-page"}},[i("div",{staticClass:"container-fluid px-0 h-100 d-flex"},[i("ToolBar"),i("SketchBoard"),i("ControlPanel"),i("Previewer"),i("ProjectSettingModal")],1)])},j=[],k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tool-bar py-3 px-2"},[i("div",{staticClass:"tool-bar-section text-left"},[i("p",{staticClass:"section-title text-center text-sm"},[e._v("\n      可用元件\n    ")]),i("ul",{staticClass:"widget-list d-flex flex-wrap py-2"},[e._l(e.mainBarWidgets,function(t){return i("li",{key:t.name,staticClass:"w-100 mb-2 py-1",class:{active:e.cateViewOpt[t.category]}},[i("div",{staticClass:"widget-block d-flex flex-column align-items-center cursor-pointer",on:{click:function(i){return e.toolbarItemClick(t)}}},[i("font-awesome-icon",{attrs:{icon:t.icon,size:"2x"}}),i("span",{staticClass:"text-sm mt-2"},[e._v(e._s(t.title))])],1)])}),i("li")],2),i("hr")]),i("div",{ref:"picture-category",staticClass:"tool-category-section tool-picture-section"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.cateViewOpt.picture,expression:"cateViewOpt.picture"}],staticClass:"tool-category-container tool-picture-container pt-3 px-2"},[i("p",{staticClass:"pb-2"},[e._v("已上傳圖片： "),i("span",[e._v(e._s(e.pictures.length))])]),i("div",{staticClass:"pb-2"},[i("ImageUploader",{attrs:{show:!0}})],1),0==e.pictures.length?i("p",{staticClass:"py-4"},[e._v("\n        尚沒有任何圖片\n      ")]):e._e(),i("div",{staticClass:"d-flex flex-wrap"},e._l(e.pictures,function(t,a){return i("div",{key:t,staticClass:"picture-item p-1 mt-2 w-50",on:{click:function(i){return e.addExistPicture(t)}}},[i("div",{staticClass:"picture-block p-1"},[i("img",{attrs:{src:t}})])])}),0)])]),i("div",{ref:"form-category",staticClass:"tool-category-section"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.cateViewOpt.form,expression:"cateViewOpt.form"}],staticClass:"tool-category-container pt-3 px-2"},[i("ul",{staticClass:"widget-list d-flex flex-wrap py-2"},[e._l(e.widgets,function(t){return"form"==t.category?i("li",{key:t.name,staticClass:"col-4 px-0 mb-2 py-1"},[i("div",{staticClass:"widget-block d-flex flex-column align-items-center cursor-pointer",on:{click:function(i){return e.addWidgetWithId(t)}}},[i("font-awesome-icon",{attrs:{icon:t.icon,size:"2x"}}),i("span",{staticClass:"text-sm mt-2"},[e._v(e._s(t.title))])],1)]):e._e()}),i("li",{staticClass:"col-4 px-0 mb-2 py-1"},[i("div",{staticClass:"widget-block d-flex flex-column align-items-center cursor-pointer",on:{click:function(t){return e.addFormTemplate()}}},[i("font-awesome-icon",{attrs:{icon:["fas","clipboard-list"],size:"2x"}}),i("span",{staticClass:"text-sm mt-2"},[e._v("表格模版")])],1)])],2)])])])},P=[],S=i("db72"),W=(i("ac6a"),i("456d"),i("bb84")),z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div"},[i("button",{staticClass:"btn btn-primary btn-block",class:{"d-none":!e.show},on:{click:function(t){return e.uploader.click()}}},[e._v("\n    上傳圖片\n  ")]),i("input",{staticClass:"d-none",attrs:{id:"image-uploader",multiple:!!e.multiple&&"multiple",type:"file",accept:"image/png, image/jpeg, image/gif"},on:{change:e.handleUpload}})])},$=[],D=i("bc3a"),E=i.n(D),M={name:"ImageUploader",data:function(){return{multiple:!1,uploader:null,cb:null}},props:{show:{type:Boolean,default:!1},uploadOption:{type:Object,default:function(){return{url:"/create/uploadFileDo"}}}},created:function(){var e=document.head.querySelector('meta[name="csrf-token"]');e?(E.a.defaults.headers.common["X-CSRF-TOKEN"]=e.content,logger.log("CSRF token success!")):logger.log("CSRF token not found!")},mounted:function(){var e=this;this.uploader=document.getElementById("image-uploader"),this.$root.$on("upload",function(t,i){e.cb=t,setTimeout(function(){e.uploader.click()},0)})},beforeDestroy:function(){this.$root.$off("upload")},computed:{top:function(){return 100},canvasSize:function(){return{width:this.$store.state.canvasWidth,height:this.$store.state.canvasHeight}}},methods:{handleUpload:function(){var e=this,t=this.uploader.files;if(t&&0!==t.length){t=Array.prototype.slice.call(this.uploader.files);var i="production"===this.env?this.serverUpload:this.localUpload;i(t).then(function(t){console.log("res: "),console.log(t),new Promise(function(i){e.handleLoadQueue(i,t.data.files)()}).then(function(t){e.$store.commit("addPicture",t.map(function(e){return e.url})),e.cb&&e.cb(t),e.uploader.value=null})}).catch(function(e){console.log("error:"),console.log(e)})}else console.log("not files detect, please try again later.")},localUpload:function(e){return console.log("local uploading:",e),new Promise(function(t){t({data:{files:e,status:200}})})},serverUpload:function(e){if(console.log("server uploading:",e),this.uploadOption.url){var t=new FormData;return e.forEach(function(e){return t.append("file",e)}),E.a.post(this.uploadOption.url,t)}alert("請配置圖片上傳api地址")},handleLoadQueue:function(e,t){var i,a=this,n=0,s=t.length,o=[],r=function r(){i="production"===a.env?"/storage/user/".concat(a.userId,"/").concat(t[n].fileName):window.URL.createObjectURL(t[n]),new Promise(function(e){a.getImageWidth(i,e)}).then(function(t){o.push({width:t.w,height:t.h,url:i}),++n===s?e(o):r()}).catch(function(e){return console.log(e)})};return r},getImageWidth:function(e,t){var i=this,a=new Image;a.src=e,a.onload=function(){var e=a.width,n=a.height;a.width>=i.canvasSize.width&&(e=i.canvasSize.width,n=n*i.canvasSize.width/a.width),t({w:Math.round(e),h:Math.round(n)})}}}},T=M,A=Object(p["a"])(T,z,$,!1,null,"95d361ac",null),H=A.exports,R=[{_id:"788466",name:"atomic-submit-button",groupId:"136660",title:"提交按鈕",type:"atomic-submit-button",text:"送出",width:374,height:60,left:64,top:522,rotation:0,transformOrigin:"center center",fontSize:30,borderRadius:65,bgColor:"#ff9300",borderColor:"#5e5e5e",borderWidth:3,color:"#ffffff",lineHeight:20,bold:!0,opacity:1,animation:"",speed:1e3,delay:0,times:1,circulation:!1},{_id:"0955278",name:"atomic-text-input",groupId:"136660",title:"文字輸入",type:"atomic-text-input",text:"Email",width:373,height:61,left:65,top:424,rotation:0,transformOrigin:"center center",fontSize:33,borderRadius:40,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",animation:"",speed:1e3,delay:0,times:1,circulation:!1},{_id:"0953639",name:"atomic-text-input",groupId:"136660",title:"文字輸入",type:"atomic-text-input",text:"職稱",width:373,height:61,left:66,top:330,rotation:0,transformOrigin:"center center",fontSize:33,borderRadius:40,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",animation:"",speed:1e3,delay:0,times:1,circulation:!1},{_id:"0805353",name:"atomic-text-input",groupId:"136660",title:"文字輸入",type:"atomic-text-input",text:"服務單位",width:373,height:61,left:66,top:239,rotation:0,transformOrigin:"center center",fontSize:33,borderRadius:40,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",animation:"",speed:1e3,delay:0,times:1,circulation:!1},{_id:"449768",name:"atomic-text-input",groupId:"136660",title:"文字輸入",type:"atomic-text-input",text:"姓名",width:373,height:61,left:65,top:147,rotation:0,transformOrigin:"center center",fontSize:33,borderRadius:40,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",animation:"",speed:1e3,delay:0,times:1,circulation:!1}],U=R,N={name:"ToolBar",components:{ImageUploader:H},data:function(){return{widgets:W["a"],cateViewOpt:{picture:!1,form:!1}}},computed:{mainBarWidgets:function(){var e=this,t={},i=Object.keys(this.widgets).map(function(t){return e.widgets[t].category||""});return Object.keys(this.widgets).forEach(function(a,n,s){var o=e.widgets[a];o.category&&i.indexOf(o.category)!==n||(t[a]=o)}),t},pictures:function(){return this.$store.state.pictures.slice().reverse()},canvasSize:function(){return{width:this.$store.state.canvasWidth,height:this.$store.state.canvasHeight}}},methods:{toolbarItemClick:function(e){e.category?this.toggleCategory(e):this.addWidgetWithId(e)},addWidgetWithId:function(e){var t=this;this.$logger.log("addWidgetWithId"),this.$logger.log(e.setting),e.setting.isUpload?this.$root.$emit("upload",function(i){i.forEach(function(i){t.addWidget(Object(S["a"])({_id:t.randomID(),name:e.name,groupId:""},e.setting,{},i))})},!0):(this.addWidget(Object(S["a"])({_id:this.randomID(),name:e.name,groupId:""},e.setting)),this.closeCategory())},toggleCategory:function(e){var t=this;Object.keys(this.cateViewOpt).forEach(function(i){i!=e.category&&(t.cateViewOpt[i]=!1)}),this.cateViewOpt[e.category]=!this.cateViewOpt[e.category]},closeCategory:function(){var e=this;Object.keys(this.cateViewOpt).forEach(function(t){e.cateViewOpt[t]=!1})},addExistPicture:function(e){var t=this,i=this.widgets["atomic-picture"];this.$logger.log(this.widgets),new Promise(function(i){t.getImageSize(e,i)}).then(function(a){t.$logger.log("size"),t.$logger.log(a),t.addWidget(Object(S["a"])({_id:t.randomID(),name:i.name},i.setting,{groupId:"",width:a.w,height:a.h,url:e}))}),this.cateViewOpt["picture"]=!1},getImageSize:function(e,t){var i=this,a=new Image;a.src=e,a.onload=function(){var e=a.width,n=a.height;a.width>=i.canvasSize.width&&(e=i.canvasSize.width,n=n*i.canvasSize.width/a.width),t({w:Math.round(e),h:Math.round(n)})}},addFormTemplate:function(){var e=this;this.$logger.log("add form template"),this.$store.commit(c["t"]),U.forEach(function(t){e.$store.commit(c["b"],Object(S["a"])({},t,{_id:e.randomID()}))}),this.closeCategory()}}},q=N,L=Object(p["a"])(q,k,P,!1,null,"3977ea00",null),X=L.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sketch-board col px-0 position-relative",on:{mousedown:function(t){return e.handleMousedown(t)}}},[i("div",{staticClass:"sketch-container w-100 h-100"},[i("div",{staticClass:"sketch-body w-100 h-100 d-flex justify-content-center"},[i("div",{ref:"sketch-screen",staticClass:"screen",style:{width:e.$store.state.canvasWidth+"px",height:e.$store.state.canvasHeight+"px",transform:"scale("+e.zoom/100+")",backgroundColor:e.page.bgColor}},[e._l(e.sketchWidgetsReverse,function(t){return i(t.name,{key:t.uuid,tag:"component",staticClass:"layer",class:{"multi-select":e.selectedIds.includes(t._id)},attrs:{val:t,"data-id":t._id,"data-type":t.name,"data-group-id":t.groupId},nativeOn:{dblclick:function(t){return e.$store.commit("updateData",{key:"editing",value:!0})}}})}),e._l(e.selectedGroups,function(t){return e.selectedGroups.length?i("group-area",{key:t,attrs:{groupId:t}}):e._e()}),i("rotate-control"),i("replace-control"),i("size-control"),i("multi-select-control"),e.moving&&"multi-select"==e.controlType?i("div",{staticClass:"select-area",style:Object.assign({},{zIndex:2,position:"absolute"},e.selectAreaSize)}):e._e()],2)])])])},G=[],J=(i("6762"),i("2fdb"),i("2f62")),V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.selectedId>0?i("div",{staticClass:"size-control",class:{active:e.widget._id===e.$store.state.selectedId},style:{left:e.widget.left+"px",top:e.widget.top+"px",width:e.widget.width+"px",height:e.widget.height+"px",transform:"rotate("+e.widget.rotation+"deg)",transformOrigin:""+e.widget.transformOrigin},attrs:{"data-type":e.widget.type,"data-id":e.widget._id},on:{dblclick:function(t){return e.editMode()}}},[i("div",{staticClass:"horiz-arrow top d-flex",class:{resizing:e.isResizing("top")},style:{top:0-e.offsetTop+"px",left:e.widget.width/2-5+"px",cursor:e.resizeCursor(0)},on:{mousedown:function(t){return e.handlemousedown(t,"top")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow right d-flex",class:{resizing:e.isResizing("right")},style:{top:e.widget.height/2-e.offsetTop+"px",left:e.widget.width-e.offsetLeft+"px",cursor:e.resizeCursor(90)},on:{mousedown:function(t){return e.handlemousedown(t,"right")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"horiz-arrow bottom d-flex",class:{resizing:e.isResizing("bottom")},style:{top:e.widget.height-e.offsetTop+"px",left:e.widget.width/2-e.offsetLeft+"px",cursor:e.resizeCursor(180)},on:{mousedown:function(t){return e.handlemousedown(t,"bottom")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("left")},style:{top:e.widget.height/2-e.offsetTop+"px",left:0-e.offsetLeft+"px",cursor:e.resizeCursor(270)},on:{mousedown:function(t){return e.handlemousedown(t,"left")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("right top")},style:{top:0-e.offsetTop+"px",left:e.widget.width-e.offsetLeft+"px",cursor:e.resizeCursor(45)},on:{mousedown:function(t){return e.handlemousedown(t,"right top")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("right bottom")},style:{top:e.widget.height-e.offsetTop+"px",left:e.widget.width-e.offsetLeft+"px",cursor:e.resizeCursor(135)},on:{mousedown:function(t){return e.handlemousedown(t,"right bottom")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("left bottom")},style:{top:e.widget.height-e.offsetTop+"px",left:0-e.offsetLeft+"px",cursor:e.resizeCursor(225)},on:{mousedown:function(t){return e.handlemousedown(t,"left bottom")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("left top")},style:{top:0-e.offsetTop+"px",left:0-e.offsetLeft+"px",cursor:e.resizeCursor(315)},on:{mousedown:function(t){return e.handlemousedown(t,"left top")}}},[i("div",{staticClass:"square"})])]):e._e()},B=[],F={name:"sizeControl",data:function(){return{direction:"",offsetLeft:6,offsetTop:5}},computed:{widget:function(){return this.selectedWidget}},methods:{handlemousedown:function(e,t){e.stopPropagation();this.selectedWidget;this.direction=t,this.$store.commit(c["t"]),this.$store.commit(c["m"],{startX:e.pageX,startY:e.pageY}),document.addEventListener("mousemove",this.handleMousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handleMousemove:function(e){e.stopPropagation(),e.preventDefault(),this.$store.commit(c["v"],{x:e.pageX,y:e.pageY,direction:this.direction,id:this.selectedId})},handlemouseup:function(){document.removeEventListener("mousemove",this.handleMousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$store.commit(c["j"],this.selectedId),this.$store.commit(c["E"],this.selectedId)},isResizing:function(e){var t=this.$store.state,i=t.controlType,a=t.direction;return"resize"===i&&e===a},resizeCursor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.widget.rotation,i=(t+e)%360;return i<23||i>=338?"n-resize":i>=23&&i<68?"ne-resize":i>=68&&i<113?"e-resize":i>=113&&i<158?"se-resize":i>=158&&i<203?"s-resize":i>=203&&i<248?"sw-resize":i>=248&&i<293?"w-resize":i>=293&&i<338?"nw-resize":void 0},editMode:function(){this.$store.commit("updateData",{key:"editing",value:!0})}}},K=F,Q=Object(p["a"])(K,V,B,!1,null,"5f1b8cc2",null),Z=Q.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.selectedId>0?i("div",{staticClass:"rotate-control",style:{left:e.widget.left+"px",top:e.widget.top+"px",width:e.widget.width+"px",height:e.widget.height+"px",transform:"rotate("+e.widget.rotation+"deg)",transformOrigin:""+e.widget.transformOrigin},attrs:{"data-type":e.widget.type,"data-id":e.widget._id}},[i("div",{staticClass:"rotate-arrow bottom d-flex",style:{top:e.widget.height-7+30+"px",left:e.widget.width/2-7+"px"},on:{mousedown:function(t){return e.handlemousedown(t,"bottom","height")}}},[i("div",{staticClass:"circle",class:{rotating:e.isRotating}},[i("font-awesome-icon",{attrs:{icon:["fas","redo-alt"]}})],1)]),i("div",{staticClass:"rotation-display d-flex",style:{top:e.widget.height-5+25+"px",left:e.widget.width/2-5+20+"px"}},[e._v("\n    "+e._s(e.widget.rotation)+"°\n  ")])]):e._e()},te=[],ie={name:"rotateControl",data:function(){return{}},computed:{isRotating:function(){return"rotate"===this.$store.state.controlType},widget:function(){return this.selectedWidget}},methods:{handlemousedown:function(e){e.stopPropagation();var t=this.selectedWidget;this.$store.commit(c["t"]),this.$store.commit(c["m"],{startX:e.pageX,startY:e.pageY,originTop:t.top,originLeft:t.left,originWidth:t.width,originHeight:t.height}),document.addEventListener("mousemove",this.handleMousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handleMousemove:function(e){e.stopPropagation(),e.preventDefault(),this.$store.commit(c["w"],{x:e.pageX,y:e.pageY,id:this.selectedId})},handlemouseup:function(){document.removeEventListener("mousemove",this.handleMousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$store.commit(c["j"],this.selectedId),this.$store.commit(c["E"],this.selectedId)}}},ae=ie,ne=Object(p["a"])(ae,ee,te,!1,null,"8165a94a",null),se=ne.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"zoom-control d-flex align-items-center",attrs:{"mousemove.stop":""}},[i("div",{staticClass:"panel-label"}),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(e.zoom))+"%")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.zoom,callback:function(t){e.zoom=t},expression:"zoom"}},"vue-slider",e.sliderOptions.zoom,!1))],1)])},re=[],le=i("4971"),ce=i.n(le),de=i("1885"),ue={name:"zoomControl",data:function(){return{sliderOptions:{zoom:{min:50,max:150,tooltip:"none",process:!0}}}},components:{VueSlider:ce.a},computed:{zoom:Object(de["takeState"])("zoom").hook(function(e,t,i){var a=e.dispatch;a("updateData",{key:"zoom",value:t})}).map()}},pe=ue,fe=Object(p["a"])(pe,oe,re,!1,null,"a8bd1c46",null),ve=fe.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.selectedId>0&&e.widget.isUpload?i("div",{staticClass:"replace-control",style:{left:e.widget.left+"px",top:e.widget.top+"px",width:e.widget.width+"px",height:e.widget.height+"px",transform:"rotate("+e.widget.rotation+"deg)",transformOrigin:""+e.widget.transformOrigin},attrs:{"data-type":e.widget.type,"data-id":e.widget._id}},[i("div",{staticClass:"replace-block d-flex flex-column justify-content-center align-items-center",style:{top:e.widget.height+"px",right:"0px"},on:{mousedown:function(e){e.stopPropagation()},click:function(t){return e.updatePicture(t)}}},[i("font-awesome-icon",{attrs:{icon:["fas","sync"]}}),i("span",{staticClass:"d-inline-block font-weight-bold",staticStyle:{"font-size":"10px"}},[e._v("replace")])],1)]):e._e()},me=[],he={name:"replaceControl",computed:{widget:function(){return this.selectedWidget}},methods:{updatePicture:function(){var e=this;this.$root.$emit("upload",function(t){t.forEach(function(t){t.height=t.height/t.width*e.widget.width,t.width=e.widget.width;var i=Object.keys(t).map(function(e){return{key:e,value:t[e]}});e.$store.dispatch("updatePicture",i)})},!0)}}},be=he,we=Object(p["a"])(be,ge,me,!1,null,"1c0b4362",null),Ce=we.exports,xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.selectedIds.length>1?i("div",{staticClass:"multi-select-control",style:{left:e.area.left+"px",top:e.area.top+"px",width:e.area.width+"px",height:e.area.height+"px"},attrs:{"data-type":"multi-select","data-group-id":"-1"}},[e.canGroup?e._e():i("div",{staticClass:"horiz-arrow top d-flex",class:{resizing:e.isResizing("top")},style:{top:"-6px",left:e.area.width/2-5+"px",cursor:e.resizeCursor(0)},on:{mousedown:function(t){return e.handlemousedown(t,"top")}}},[i("div",{staticClass:"square"})]),e.canGroup?e._e():i("div",{staticClass:"verti-arrow right d-flex",class:{resizing:e.isResizing("right")},style:{top:e.area.height/2-e.offsetTop+"px",left:e.area.width-e.offsetLeft+"px",cursor:e.resizeCursor(90)},on:{mousedown:function(t){return e.handlemousedown(t,"right")}}},[i("div",{staticClass:"square"})]),e.canGroup?e._e():i("div",{staticClass:"horiz-arrow bottom d-flex",class:{resizing:e.isResizing("bottom")},style:{top:e.area.height-e.offsetTop+"px",left:e.area.width/2-e.offsetLeft+"px",cursor:e.resizeCursor(180)},on:{mousedown:function(t){return e.handlemousedown(t,"bottom")}}},[i("div",{staticClass:"square"})]),e.canGroup?e._e():i("div",{staticClass:"verti-arrow left d-flex",class:{resizing:e.isResizing("left")},style:{top:e.area.height/2-e.offsetTop+"px",left:"-6px",cursor:e.resizeCursor(270)},on:{mousedown:function(t){return e.handlemousedown(t,"left")}}},[i("div",{staticClass:"square"})]),i("div",{staticClass:"grouping-block d-flex flex-column justify-content-center align-items-center",style:{top:e.area.height-2+"px",right:"-2px"},on:{mousedown:function(e){e.stopPropagation()},click:function(t){return e.toggleGroupWidgets(t)}}},[e.canGroup?i("font-awesome-icon",{attrs:{icon:["far","object-group"]}}):i("font-awesome-icon",{attrs:{icon:["far","object-ungroup"]}}),i("span",{staticClass:"d-inline-block font-weight-bold"},[e._v(e._s(e.canGroup?"group":"un-group"))])],1)]):e._e()},_e=[],ye={name:"multiSelectControl",data:function(){return{direction:"",offsetLeft:8,offsetTop:7,grouping:!0}},computed:Object(S["a"])({},Object(J["c"])({area:"multiSelectArea",canGroup:"canGroup"})),methods:{toggleGroupWidgets:function(e){var t=this.canGroup?this.randomID():"";this.$store.dispatch("groupWidgets",t)},handlemousedown:function(e,t){e.stopPropagation();var i=this.area;this.direction=t,this.$store.commit(c["t"]),this.$store.commit(c["m"],{startX:e.pageX,startY:e.pageY,originTop:i.top,originLeft:i.left,originWidth:i.width,originHeight:i.height}),document.addEventListener("mousemove",this.handleMousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handleMousemove:function(e){e.stopPropagation(),e.preventDefault(),this.$store.dispatch("resizeMultiWidget",{x:e.pageX,y:e.pageY,direction:this.direction})},handlemouseup:function(){document.removeEventListener("mousemove",this.handleMousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$store.dispatch("endMultiWidgetControl"),this.$store.dispatch("setMultiWidgetOrigin")},resizeCursor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=0,i=(t+e)%360;return i<23||i>=338?"n-resize":i>=23&&i<68?"ne-resize":i>=68&&i<113?"e-resize":i>=113&&i<158?"se-resize":i>=158&&i<203?"s-resize":i>=203&&i<248?"sw-resize":i>=248&&i<293?"w-resize":i>=293&&i<338?"nw-resize":void 0},isResizing:function(e){var t=this.$store.state,i=t.controlType,a=t.direction;return"resize"===i&&e===a}}},Oe=ye,Ie=Object(p["a"])(Oe,xe,_e,!1,null,"7f9aef4f",null),je=Ie.exports,ke=i("1b62"),Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{position:"absolute",left:e.widgetArea.left+"px",top:e.widgetArea.top+"px",width:e.widgetArea.width+"px",height:e.widgetArea.height+"px",border:"solid 1px green"}},[e._v("\n  "+e._s(e.widget.groupId)+"\n")])},Se=[],We=i("ce96"),ze={name:"widgetArea",props:["widget"],computed:{widgetArea:function(){return Object(We["g"])(this.widget)}}},$e=ze,De=Object(p["a"])($e,Pe,Se,!1,null,"4bcff23b",null),Ee=De.exports,Me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"group-area",style:{left:e.widgetArea.left+"px",top:e.widgetArea.top+"px",width:e.widgetArea.width+"px",height:e.widgetArea.height+"px"}},[i("p",{staticClass:"control-label"},[e._v("group")])])},Te=[],Ae={name:"groupArea",props:["groupId"],computed:{widgetArea:function(){var e=this;return this.sketchWidgets.filter(function(t){return t.groupId===e.groupId}).reduce(function(e,t){return Object(We["c"])(e,t)},null)}},methods:{}},He=Ae,Re=Object(p["a"])(He,Me,Te,!1,null,"53fdfd07",null),Ue=Re.exports,Ne={name:"SketchBoard",components:{sizeControl:Z,rotateControl:se,replaceControl:Ce,multiSelectControl:je,widgetArea:Ee,groupArea:Ue},data:function(){return{widgets:W["a"],mouseX:0,mouseY:0,isGroup:!1}},mixins:[ke["b"]],mounted:function(){this.selectPage(this.pages[0]._id),this.$store.dispatch("cleanStep"),this.initScreenXY(),window.addEventListener("resize",this.initScreenXY)},beforeDestroy:function(){window.removeEventListener("resize",this.initScreenXY)},computed:Object(S["a"])({},Object(J["d"])({startX:function(e){return e.startX},startY:function(e){return e.startY},screenX:function(e){return e.screenX},screenY:function(e){return e.screenY},moving:function(e){return e.moving},controlType:function(e){return e.controlType},selectedIds:function(e){return e.selectedIds},zoom:function(e){return e.zoom}}),{},Object(J["c"])({canGroup:"canGroup",selectedGroups:"selectedGroups"}),{sketchWidgetsReverse:function(){return this.sketchWidgets.slice().reverse()},page:function(){return this.selectedPage},selectAreaSize:function(){var e=100/this.zoom,t=this.mouseX,i=this.mouseY,a=this.startX,n=this.startY,s=this.screenX,o=this.screenY,r="".concat((Math.min(t,a)-s)*e,"px"),l="".concat((Math.min(i,n)-o)*e,"px"),c="".concat(Math.abs(t-a)*e,"px"),d="".concat(Math.abs(i-n)*e,"px");return{left:r,top:l,width:c,height:d}}}),methods:{initScreenXY:function(){var e=this.$refs["sketch-screen"].getBoundingClientRect(),t=e.left,i=e.top;this.$store.commit(c["o"],{x:t,y:i}),this.$logger.log("init screen xy")},handleMousedown:function(e){var t=e.target.dataset;this.$store.commit(c["t"]),this.isGroup=!1,t.type?t.groupId?(-1!=this.selectedId&&this.selectWidget(-1),this.isGroup=!0,t.groupId>0&&this.$store.dispatch("selectGroup",t.groupId)):this.selectedId!=t.id&&(this.$store.commit("updateData",{key:"editing",value:!1}),this.$store.commit(c["f"]),this.selectWidget(t.id)):-1!=this.selectedId&&(this.$store.commit("updateData",{key:"editing",value:!1}),this.$store.commit(c["f"]),this.selectWidget(-1)),this.initMove(e)},initMove:function(e){var t=this.selectedWidget;this.$store.commit(c["m"],{startX:e.pageX,startY:e.pageY,originX:t?t.left:0,originY:t?t.top:0,originLeft:t?t.left:0,originTop:t?t.top:0}),this.mouseX=e.pageX,this.mouseY=e.pageY,document.addEventListener("mousemove",this.handleMousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handleMousemove:function(e){e.stopPropagation(),e.preventDefault(),this.selectedId>-1?this.$store.commit(c["r"],{x:e.pageX,y:e.pageY,id:this.selectedId}):(this.isGroup?this.$store.dispatch("moveMultiWidget",{x:e.pageX,y:e.pageY}):this.$store.dispatch("selectMultiWidget",{x:e.pageX,y:e.pageY}),this.mouseX=e.pageX,this.mouseY=e.pageY)},handlemouseup:function(e){document.removeEventListener("mousemove",this.handleMousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0);var t=this.$store.state,i=t.startX,a=t.startY;this.selectedId<0&&e.pageX==i&&e.pageY==a&&(this.$logger.log("same mouse pos!"),e.target.dataset.id?this.selectedIds.includes(e.target.dataset.id)||this.$store.commit(c["z"],{x:e.pageX,y:e.pageY}):e.target.dataset.groupId||this.$store.commit(c["z"],{x:e.pageX,y:e.pageY})),this.$store.commit(c["j"],this.selectedId),this.$store.dispatch("setMultiWidgetOrigin"),this.$store.commit(c["E"],this.selectedId)}},watch:{zoom:function(){this.initScreenXY()}}},qe=Ne,Le=Object(p["a"])(qe,Y,G,!1,null,null,null),Xe=Le.exports,Ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"control-panel py-3 px-4 text-left"},[i("div",{staticClass:"row h-100"},[i("div",{staticClass:"col-md-6",staticStyle:{"border-right":"solid 1px #aaa"}},[i("page-viewer")],1),i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"col-wrapper pb-4"},[i("layer-viewer")],1),i("div",{staticClass:"col-wrapper pb-4"},[e.selectedId>=0?i("base-style-control",{attrs:{widget:e.selectedWidget}}):i("page-style-control",{attrs:{page:e.selectedPage}})],1),i("div",{staticClass:"col-wrapper pb-4"},[e.selectedId>=0?i("animation-style-control",{attrs:{widget:e.selectedWidget}}):e._e()],1)])]),i("zoom-control")],1)},Ge=[],Je=(i("55dd"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row layer-viewer-wrapper"},[i("div",{staticClass:"col-12 mb-2 d-flex justify-content-between align-items-center"},[i("p",[e._v("元件圖層")]),i("div",{staticClass:"d-flex"},[i("button",{staticClass:"btn btn-sm btn-outline-info text-info",attrs:{disabled:e.selectedId<0},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.cloneWidget(e.selectedWidget._id)}}},[i("font-awesome-icon",{attrs:{icon:["far","copy"]}})],1),i("button",{staticClass:"btn btn-sm btn-outline-danger text-danger ml-1",attrs:{disabled:e.selectedId<0},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteWidget(e.selectedWidget._id)}}},[i("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)])]),i("div",{staticClass:"col-12"},[i("draggable",e._b({staticClass:"widget-layer-list",attrs:{tag:"ul",group:"widgets"},on:{choose:e.onChoose},model:{value:e.sketchWidgets,callback:function(t){e.sketchWidgets=t},expression:"sketchWidgets"}},"draggable",e.dragOptions,!1),e._l(e.sketchWidgets,function(t){return i("li",{key:t._id,staticClass:"widget-layer-list-item",class:{active:t._id===e.selectedId},attrs:{"data-id":t._id},on:{click:function(i){return e.selectWidget(t._id)}}},[i("p",{staticClass:"layer-title d-flex align-items-center"},[i("span",{staticClass:"text-sm"},[e._v(e._s(""+t._id))]),i("span",{staticClass:"ml-1"},[e._v("- "+e._s(""+t.title))])])])}),0)],1)])}),Ve=[],Be=(i("20d6"),i("310e")),Fe=i.n(Be),Ke={name:"LayerViewer",data:function(){return{}},components:{draggable:Fe.a},computed:{sketchWidgets:{get:function(){var e=this,t=this.$store.state.pages.findIndex(function(t){return t._id===e.$store.state.activePageId});return this.$store.state.pages[t].widgets},set:function(e){this.$store.dispatch("updateWidgets",e)}},dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},methods:{onChoose:function(e){this.selectWidget(e.item.dataset.id)}}},Qe=Ke,Ze=Object(p["a"])(Qe,Je,Ve,!1,null,"48fa6b05",null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row page-viewer-wrapper"},[i("div",{staticClass:"w-100 pr-2 mb-2 d-flex justify-content-between align-items-center"},[i("p",[e._v("所有頁面")]),i("button",{staticClass:"btn btn-sm btn-outline-success",on:{click:function(t){return e.addNewPage()}}},[i("font-awesome-icon",{attrs:{icon:["far","file"]}}),e._v("+\n    ")],1)]),i("div",{staticClass:"w-100 pr-2"},[i("draggable",e._b({staticClass:"widget-layer-list",attrs:{tag:"ul"},on:{choose:e.onChoose},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}},"draggable",e.dragOptions,!1),e._l(e.pages,function(t,a){return i("li",{key:t._id,staticClass:"widget-layer-list-item",attrs:{"data-id":t._id},on:{click:function(i){return e.selectPage(t._id)}}},[i("PageViewerItem",{attrs:{page:t,pId:a}})],1)}),0)],1)])},it=[],at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"widget-layer-list-item-block",style:{backgroundColor:e.page._id===e.activePageId?"#f4f4f4":"#fff"},on:{click:function(t){return e.selectPage(e.page._id)}}},[i("div",{staticClass:"item-main d-flex align-items-center"},[i("span",{staticClass:"pr-2"},[e._v("\n      "+e._s(""+e.strPaddingLeft(e.pId+1,2))+"\n    ")]),i("div",{staticClass:"page-preview",style:{width:"100px",height:100*e.canvasHeight/e.canvasWidth+"px"}},[i("div",{staticClass:"screen",style:{width:e.canvasWidth+"px",height:e.canvasHeight+"px",transform:"scale("+100/e.canvasWidth+")",backgroundColor:e.page.bgColor}},e._l(e.pageWidgets,function(e){return i(e.name,{key:e._id,tag:"component",staticClass:"layer",attrs:{val:e,"data-id":e._id,"data-type":e.name}})}),1)])]),i("div",{staticClass:"d-flex flex-column justify-content-center align-items-stretch"},[i("button",{staticClass:"btn btn-sm btn-outline-info text-info mb-2",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.clonePage(e.page._id)}}},[i("font-awesome-icon",{attrs:{icon:["far","copy"]}})],1),e.pages.length>1?i("button",{staticClass:"btn btn-sm btn-outline-danger text-danger",attrs:{disabled:e.pages.length<=1},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deletePage(e.page._id)}}},[i("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1):e._e()])])},nt=[],st={name:"PageViewerItem",data:function(){return{}},props:["page","pId"],computed:{pageWidgets:function(){return this.page.widgets.slice().reverse()},canvasWidth:function(){return this.$store.state.canvasWidth},canvasHeight:function(){return this.$store.state.canvasHeight}}},ot=st,rt=Object(p["a"])(ot,at,nt,!1,null,"68e85254",null),lt=rt.exports,ct={name:"PageViewer",data:function(){return{}},components:{draggable:Fe.a,PageViewerItem:lt},computed:{pages:{get:function(){return this.$store.state.pages},set:function(e){this.$store.dispatch("updatePages",e)}},dragOptions:function(){return{animation:0,group:"pages",disabled:!1,ghostClass:"ghost"}}},methods:{onChoose:function(e){this.selectPage(e.item.dataset.id)},addNewPage:function(){var e="page-".concat(this.strPaddingLeft(this.pages.length+1,2));this.addPage({_id:this.randomID(),title:e,bgColor:"#ffffff",widgets:[]})}}},dt=ct,ut=Object(p["a"])(dt,tt,it,!1,null,"3027abb5",null),pt=ut.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row widget-style-wrapper"},[e._m(0),e._l(e.widgetStyle,function(t,a){return t.type===e.selectedWidget.type?i(e.widgetStyle[a],{key:a,tag:"component",attrs:{widget:e.widget}}):e._e()})],2)},vt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12 mb-2"},[i("p",[e._v("元件屬性")])])}],gt={name:"BaseStyleControl",components:{VueSlider:ce.a},data:function(){return{widgetStyle:W["b"],sliderOptions:{width:{min:10,max:1e3,tooltip:"none",process:!1},height:{min:10,max:1e3,tooltip:"none",process:!1},left:{min:-400,max:1e3,tooltip:"none",process:!1},top:{min:-100,max:1e3,tooltip:"none",process:!1},speed:{min:100,max:5e3,tooltip:"none",process:!0}}}},props:["widget"],computed:Object(S["a"])({},Object(de["take"])("widget").expose(["width","height","left","top","animation","speed","delay","times","circulation"]).dispatch("updateSelectedWidget").map())},mt=gt,ht=Object(p["a"])(mt,ft,vt,!1,null,null,null),bt=ht.exports,wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row widget-style-wrapper"},[e.selectedId<0?i("div",{staticClass:"col-12 mb-2"},[i("p",[e._v("頁面屬性")])]):e._e(),i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("頁面標題")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",placeholder:"限英文且不重複"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])])])])])},Ct=[],xt={name:"PageStyleControl",components:{VueSlider:ce.a},data:function(){return{sliderOptions:{width:{min:10,max:1e3,tooltip:"none",process:!1},height:{min:10,max:1e3,tooltip:"none",process:!1},left:{min:-400,max:1e3,tooltip:"none",process:!1},top:{min:-100,max:1e3,tooltip:"none",process:!1},speed:{min:100,max:5e3,tooltip:"none",process:!0}}}},props:["page"],computed:Object(S["a"])({},Object(de["take"])("page").expose(["title","bgColor"]).dispatch("updateSelectedPage").map())},_t=xt,yt=Object(p["a"])(_t,wt,Ct,!1,null,null,null),Ot=yt.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row widget-style-wrapper"},[e._m(0),i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("動畫")]),i("div",{staticClass:"panel-input-wrap"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.animation,expression:"animation"}],staticClass:"form-control",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.animation=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[e._v("無")]),e._l(e.animateTypeOptions,function(t){return i("option",{attrs:{disabled:t.disabled},domProps:{value:t.value}},[e._v(e._s(t.name))])})],2)])])]),i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("時間")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s((e.speed/1e3).toFixed(1))+" s ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.speed,callback:function(t){e.speed=t},expression:"speed"}},"vue-slider",e.sliderOptions.speed,!1))],1)])]),i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("延遲")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s((e.delay/1e3).toFixed(1))+" s ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.delay,callback:function(t){e.delay=t},expression:"delay"}},"vue-slider",e.sliderOptions.delay,!1))],1)])]),i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("次數")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.times)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.times,callback:function(t){e.times=t},expression:"times"}},"vue-slider",e.sliderOptions.times,!1))],1)])]),i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("無限循環")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.circulation,expression:"circulation"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.circulation)?e._i(e.circulation,null)>-1:e.circulation},on:{change:function(t){var i=e.circulation,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.circulation=i.concat([s])):o>-1&&(e.circulation=i.slice(0,o).concat(i.slice(o+1)))}else e.circulation=n}}})])])])])])},jt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12 mb-2"},[i("p",[e._v("元件動畫")])])}],kt={name:"AnimationStyleControl",components:{VueSlider:ce.a},data:function(){return{sliderOptions:{speed:{min:100,max:5e3,tooltip:"none",process:!0},delay:{min:0,max:3e4,tooltip:"none",process:!0},times:{min:1,max:10,tooltip:"none",process:!0}},animateTypeOptions:[{name:"-- Special --",value:"",disabled:!0},{name:"bounce",value:"bounce",disabled:!1},{name:"flash",value:"flash",disabled:!1},{name:"pulse",value:"pulse",disabled:!1},{name:"rubberBand",value:"rubberBand",disabled:!1},{name:"shake",value:"shake",disabled:!1},{name:"headShake",value:"headShake",disabled:!1},{name:"swing",value:"swing",disabled:!1},{name:"tada",value:"tada",disabled:!1},{name:"-- Entrances --",value:"",disabled:!0},{name:"bounceIn",value:"bounceIn",disabled:!1},{name:"fadeIn",value:"fadeIn",disabled:!1},{name:"flipInX",value:"flipInX",disabled:!1},{name:"flipInY",value:"flipInY",disabled:!1},{name:"rotateIn",value:"rotateIn",disabled:!1},{name:"rollIn",value:"rollIn",disabled:!1},{name:"zoomIn",value:"zoomIn",disabled:!1},{name:"slideInDown",value:"slideInDown",disabled:!1},{name:"slideInUp",value:"slideInUp",disabled:!1},{name:"-- Exits --",value:"",disabled:!0},{name:"bounceOut",value:"bounceOut",disabled:!1},{name:"fadeOut",value:"fadeOut",disabled:!1},{name:"flipOutX",value:"flipOutX",disabled:!1},{name:"flipOutY",value:"flipOutY",disabled:!1},{name:"rotateOut",value:"rotateOut",disabled:!1},{name:"rollOut",value:"rollOut",disabled:!1},{name:"zoomOut",value:"zoomOut",disabled:!1},{name:"slideOutDown",value:"slideOutDown",disabled:!1},{name:"slideOutUp",value:"slideOutUp",disabled:!1}]}},props:["widget"],computed:Object(S["a"])({},Object(de["take"])("widget").expose(["animation","speed","delay","times","circulation"]).dispatch("updateSelectedWidget").map())},Pt=kt,St=Object(p["a"])(Pt,It,jt,!1,null,null,null),Wt=St.exports,zt={name:"ControlPanel",components:{PageViewer:pt,LayerViewer:et,BaseStyleControl:bt,PageStyleControl:Ot,AnimationStyleControl:Wt,zoomControl:ve},computed:{selectWigetsSize:function(){var e=this.$store.state,t=e.activeWidgets,i=e.selectedIds;return t.filter(function(e){return i.includes(e._id)}).sort(function(e,t){return e._id-t._id}).map(function(e){return{_id:e._id,left:e.left,top:e.top,width:e.width,height:e.height}})}}},$t=zt,Dt=Object(p["a"])($t,Ye,Ge,!1,null,"4d023b38",null),Et=Dt.exports,Mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("sweet-modal",{ref:"project-setting-modal",attrs:{title:"專案設定"},on:{open:function(t){return e.initOptions()}}},[i("div",{staticClass:"container"},[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-name"}},[e._v("專案名稱")]),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.name,expression:"options.name"}],staticClass:"form-control",attrs:{type:"text",id:"project-name",placeholder:"新專案"},domProps:{value:e.options.name},on:{input:function(t){t.target.composing||e.$set(e.options,"name",t.target.value)}}})])]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-description"}},[e._v("簡介")]),i("div",{staticClass:"col-sm-10"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.options.description,expression:"options.description"}],staticClass:"form-control",attrs:{id:"project-description",placeholder:"專案簡介描述"},domProps:{value:e.options.description},on:{input:function(t){t.target.composing||e.$set(e.options,"description",t.target.value)}}})])]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-description"}},[e._v("權限")]),i("div",{staticClass:"col-sm-10 d-flex align-item-center text-left"},[i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.privacyId,expression:"options.privacyId"}],staticClass:"form-check-input",attrs:{type:"radio",id:"project-privacy-1",value:"1"},domProps:{checked:e._q(e.options.privacyId,"1")},on:{change:function(t){return e.$set(e.options,"privacyId","1")}}}),i("label",{staticClass:"form-check-label",attrs:{for:"project-privacy-1"}},[e._v("公開")])]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.privacyId,expression:"options.privacyId"}],staticClass:"form-check-input",attrs:{type:"radio",id:"project-privacy-2",value:"2"},domProps:{checked:e._q(e.options.privacyId,"2")},on:{change:function(t){return e.$set(e.options,"privacyId","2")}}}),i("label",{staticClass:"form-check-label",attrs:{for:"project-privacy-2"}},[e._v("需要密碼")])])])]),2==e.options.privacyId?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-password"}},[e._v("密碼")]),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.password,expression:"options.password"}],staticClass:"form-control",attrs:{type:"text",id:"project-password",placeholder:"4位或以上英數字"},domProps:{value:e.options.password},on:{input:function(t){t.target.composing||e.$set(e.options,"password",t.target.value)}}})])]):e._e(),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-page-direction"}},[e._v("換頁方向")]),i("div",{staticClass:"col-sm-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.options.pageDirection,expression:"options.pageDirection"}],staticClass:"form-control",attrs:{id:"project-page-direction"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.options,"pageDirection",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"vertical"}},[e._v("垂直換頁")]),i("option",{attrs:{value:"horizontal"}},[e._v("水平換頁")]),i("option",{attrs:{value:"disabled"}},[e._v("不使用換頁")])])])]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"project-description"}},[e._v("權限")]),i("div",{staticClass:"col-sm-10 d-flex align-item-center text-left"},[i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.isPublished,expression:"options.isPublished"}],staticClass:"form-check-input",attrs:{type:"radio",id:"project-isPublished-1",value:"1"},domProps:{checked:e._q(e.options.isPublished,"1")},on:{change:function(t){return e.$set(e.options,"isPublished","1")}}}),i("label",{staticClass:"form-check-label",attrs:{for:"project-isPublished-1"}},[e._v("是")])]),i("div",{staticClass:"form-check form-check-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options.isPublished,expression:"options.isPublished"}],staticClass:"form-check-input",attrs:{type:"radio",id:"project-isPublished-2",value:"-1"},domProps:{checked:e._q(e.options.isPublished,"-1")},on:{change:function(t){return e.$set(e.options,"isPublished","-1")}}}),i("label",{staticClass:"form-check-label",attrs:{for:"project-isPublished-2"}},[e._v("否")])])])])]),i("button",{staticClass:"btn btn-light mr-2",attrs:{slot:"button"},on:{click:function(t){return e.closeModal()}},slot:"button"},[e._v("取消\n  ")]),i("button",{staticClass:"btn btn-success",attrs:{slot:"button"},on:{click:function(t){return e.saveProejct()}},slot:"button"},[e._v("儲存\n  ")])])},Tt=[],At=i("b0ae"),Ht={name:"ProjectSettingModal",components:{SweetModal:At["a"]},data:function(){return{options:{name:"",description:"",privacyId:1,password:"",bannerPhoto:"",pageDirection:"vertical",isPublished:1}}},mounted:function(){this.$root.$modal=this.$refs["project-setting-modal"]},computed:Object(S["a"])({},Object(de["takeState"])("project").expose(["name","description","privacyId","password","bannerPhoto","pageDirection","isPublished"]).dispatch("updateProject").map(),{},Object(J["d"])({fetching:function(e){return e.fetching}})),methods:{initOptions:function(){var e=this,t=this.$store.state.project;Object.keys(this.options).forEach(function(i){e.options[i]=t[i]})},closeModal:function(){this.$root.$modal.close()},saveProejct:function(){var e=this;if("production"==this.env){var t=this.$route.params.projectUUID;this.$store.dispatch("saveProject",{userId:this.userId,projectUUID:t||"",projectOptions:this.options,contentJSON:JSON.stringify(this.pages)})}else new Promise(function(t,i){e.$store.commit(c["l"],{fetchType:"saving"}),t()}).then(function(t){e.$store.dispatch("updateData",{key:"project",value:e.options}),e.$store.commit(c["y"])})}},watch:{fetching:function(e,t){t==e||t||this.closeModal()}}},Rt=Ht,Ut=(i("e051"),Object(p["a"])(Rt,Mt,Tt,!1,null,null,null)),Nt=Ut.exports,qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.previewing?i("div",{staticClass:"previewer-section position-fixed"},[i("div",{staticClass:"previewer-container"},[i("div",{staticClass:"previewer-header w-100 d-flex justify-content-end pb-2"},[i("button",{staticClass:"btn btn-danger previewer-close",on:{click:function(t){return e.closePreviewer()}}},[e._v("\n        Close "),i("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)]),i("form",{attrs:{id:"previewer-form"},on:{submit:function(e){e.preventDefault()}}},[i("swiper",{ref:"previewswiper",style:{width:e.canvasWidth+"px",height:e.canvasHeight+"px"},attrs:{options:e.swiperOption}},e._l(e.pages,function(t,a){return i("swiper-slide",{key:t._id,class:{"swiper-no-swiping":"disabled"===e.pageDirection},attrs:{id:t.title}},[i("div",{staticClass:"screen",style:{width:e.canvasWidth+"px",height:e.canvasHeight+"px"}},e._l(e.pageWidgetsReverse(t.widgets),function(e){return i(e.name,{key:e.uuid,tag:"component",staticClass:"layer",attrs:{val:e,"data-id":e._id,"data-type":e.name,"page-index":a}})}),1)])}),1)],1),i("div",{staticClass:"previewer-footer d-flex justify-content-center pt-3"},[i("span",{staticClass:"text-light"},[e._v("第"+e._s(e.swiperIndex+1)+"頁，共"+e._s(e.pages.length)+"頁")])])])]):e._e()},Lt=[],Xt=i("7212"),Yt=(i("dfa4"),{name:"Previewer",components:{swiper:Xt["swiper"],swiperSlide:Xt["swiperSlide"]},mixins:[ke["e"]]}),Gt=Yt,Jt=Object(p["a"])(Gt,qt,Lt,!1,null,null,null),Vt=Jt.exports,Bt={name:"Home",data:function(){return{name:"Home"}},components:{ToolBar:X,SketchBoard:Xe,ControlPanel:Et,Previewer:Vt,ProjectSettingModal:Nt},created:function(){this.initProject()},methods:{initProject:function(){if("production"==this.env)if(this.$route.params.projectUUID){var e=this.$route.params.projectUUID;logger.log("production mode, UUID: ".concat(e)),this.$store.dispatch("fetchProject",{userId:pageData.user.id,projectUUID:e})}else logger.log("new project");else logger.log("dev mode"),this.$store.commit(c["p"])}}},Ft=Bt,Kt=Object(p["a"])(Ft,I,j,!1,null,null,null),Qt=Kt.exports,Zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"container-fiuld bg-cover",attrs:{id:"publish-view-page"}},[e.pass?i("div",{staticClass:"container-fluid px-0 h-100 d-flex justify-content-center align-items-center "},[i("PublishViewer"),i("div",{staticClass:"col-4 d-none d-md-block text-light"},[i("div",{staticClass:"text-left"},[i("h1",[e._v(e._s(e.project.name))]),i("h3",{staticClass:"mt-2"},[e._v("\n          "+e._s(e.project.description)+"\n        ")])]),i("div",{staticClass:"share-block"})])],1):e._e(),1!=e.project.isPublished||e.pass||2!=e.project.privacyId?e._e():i("div",{staticClass:"container-fluid px-0 h-100 d-flex justify-content-center align-items-center"},[i("div",{staticClass:"col-md-4"},[i("p",{staticClass:"text-light mb-2"},[e._v("This project require password:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control text-center",attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),i("button",{staticClass:"mt-2 btn btn-light",on:{click:e.checkPassword}},[e._v("Submit")])])]),-1==e.project.isPublished?i("div",{staticClass:"container-fluid px-0 h-100 d-flex justify-content-center align-items-center"},[e._m(0)]):e._e()])},ei=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-md-4"},[i("p",{staticClass:"text-light mb-2"},[e._v("This project does not exist or is not available now.")]),i("a",{staticClass:"btn btn-light",attrs:{href:"/"}},[e._v("Back To Home")])])}],ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.previewing?i("div",{staticClass:"publish-viewer-section"},[i("div",{staticClass:"viewer-container"},[i("div",{staticClass:"viewer-header"}),i("form",{staticClass:"viewer-form",attrs:{id:"viewer-form"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[i("swiper",{ref:"previewswiper",style:{width:e.viewerSize.width+"px",height:e.viewerSize.height+"px"},attrs:{options:e.swiperOption}},e._l(e.pages,function(t,a){return i("swiper-slide",{key:t._id,class:{"swiper-no-swiping":"disabled"===e.pageDirection}},[i("div",{staticClass:"screen",style:{width:e.canvasWidth+"px",height:e.canvasHeight+"px",transform:"scale("+e.viewerSize.scale+")",transformOrigin:"left top"}},e._l(e.pageWidgetsReverse(t.widgets),function(e){return i(e.name,{key:e.uuid,tag:"component",staticClass:"layer",attrs:{val:e,"data-id":e._id,"data-type":e.name,"page-index":a}})}),1)])}),1)],1),i("div",{staticClass:"viewer-footer"})])]):e._e()},ii=[],ai=i("626a"),ni=ai["a"],si=Object(p["a"])(ni,ti,ii,!1,null,null,null),oi=si.exports,ri={name:"Viewer",data:function(){return{name:"Viewer",localPass:!1,password:""}},components:{PublishViewer:oi},created:function(){this.initProject()},computed:Object(S["a"])({},Object(J["d"])({viewPass:function(e){return e.viewPass},projectUUID:function(e){return e.projectUUID}}),{project:function(){return this.$store.state.project},pass:function(){return this.viewPass||this.localPass}}),mounted:function(){this.$store.dispatch("updateData",{key:"previewing",value:!0}),document.body.style.overflow="hidden",document.body.style.position="relative"},methods:{initProject:function(){if(this.devMode)logger.log("dev mode"),this.$store.commit(c["p"]);else if(this.$route.params.projectUUID){var e=this.$route.params.projectUUID;logger.log("production mode, UUID: ".concat(e)),this.$store.dispatch("fetchPublishProject",{userId:this.$route.params.userId||"",projectUUID:e})}else logger.log("no available project")},checkPassword:function(){this.devMode?this.password==this.project.password?(this.localPass=!0,this.$toasted.show("Password match!",{icon:"check"})):this.$toasted.show("Wrong password!",{icon:"clear"}):this.$store.dispatch("checkPasswordDo",{projectUUID:this.projectUUID,password:this.password})}}},li=ri,ci=Object(p["a"])(li,Zt,ei,!1,null,null,null),di=ci.exports,ui=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},pi=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"section container-fiuld",attrs:{id:"hoem-page"}},[i("div",{staticClass:"container-fluid px-0 h-100text-center"},[i("h2",[e._v("Error 404")])])])}],fi={name:"Error404",data:function(){return{name:"Error404"}},created:function(){}},vi=fi,gi=Object(p["a"])(vi,ui,pi,!1,null,null,null),mi=gi.exports,hi=i("a078"),bi=hi["a"].rootDirectory;hi["a"].env;a["default"].use(n["a"]);t["a"]=new n["a"]({mode:"history",base:bi,routes:[{path:"/view",component:O,children:[{path:":userId/:projectUUID",name:"View",component:di},{path:"",name:"View",component:di}]},{path:"/create",component:b,children:[{path:":projectUUID",name:"Home",component:Qt},{path:"",name:"Home",component:Qt}]},{path:"/",redirect:"/create/"},{path:"/404",name:"Error404",component:mi},{path:"*",name:"Error404ForAll",component:mi}],linkActiveClass:"active"})},a529:function(e,t,i){"use strict";var a=i("73f8"),n=i.n(a);n.a},ab86:function(e,t,i){},ad48:function(e,t,i){},b7f9:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"A",function(){return n}),i.d(t,"g",function(){return s}),i.d(t,"h",function(){return o}),i.d(t,"G",function(){return r}),i.d(t,"H",function(){return l}),i.d(t,"b",function(){return c}),i.d(t,"B",function(){return d}),i.d(t,"i",function(){return u}),i.d(t,"J",function(){return p}),i.d(t,"I",function(){return f}),i.d(t,"E",function(){return v}),i.d(t,"f",function(){return g}),i.d(t,"z",function(){return m}),i.d(t,"D",function(){return h}),i.d(t,"C",function(){return b}),i.d(t,"o",function(){return w}),i.d(t,"m",function(){return C}),i.d(t,"r",function(){return x}),i.d(t,"v",function(){return _}),i.d(t,"w",function(){return y}),i.d(t,"j",function(){return O}),i.d(t,"F",function(){return I}),i.d(t,"u",function(){return j}),i.d(t,"t",function(){return k}),i.d(t,"c",function(){return P}),i.d(t,"p",function(){return S}),i.d(t,"y",function(){return W}),i.d(t,"e",function(){return z}),i.d(t,"l",function(){return $}),i.d(t,"n",function(){return D}),i.d(t,"x",function(){return E}),i.d(t,"d",function(){return M}),i.d(t,"q",function(){return T}),i.d(t,"k",function(){return A}),i.d(t,"s",function(){return H});var a="ADD_PAGE",n="SELECT_PAGE",s="CLONE_PAGE",o="DELETE_PAGE",r="UPDATE_PAGES",l="UPDATE_SELECTED_PAGE",c="ADD_WIDGET",d="SELECT_WIDGET",u="DELETE_WIDGET",p="UPDATE_WIDGETS",f="UPDATE_SELECTED_WIDGET",v="SET_WIDGET_ORIGIN",g="CLEAR_WIDGET_ORIGIN",m="SELECT_MULTI_WIDGETS",h="SET_MULTI_WIDGETS_ORIGIN",b="SET_GROUP",w="INIT_SCREEN",C="INIT_CONTROL",x="MOVE_WIDGET",_="RESIZE_WIDGET",y="ROTATE_WIDGET",O="END_CONTROL",I="UNDO",j="REDO",k="RECORD_STEP",P="CLEAN_STEP",S="INIT_STORE",W="SAVE_STORE",z="CLEAR_STORE",$="FETCHING_DATA",D="INIT_PROJECT",E="SAVE_PROJECT",M="CLEAR_PROJECT",T="INIT_USER",A="FETCHED_DATA",H="PASSWORD_PASSED"},bb84:function(e,t,i){"use strict";var a,n,s=i("db72"),o=(i("456d"),i("ac6a"),i("bd86")),r=(i("7f7f"),function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a(t.val.href&&t.previewing?"a":"div",{tag:"component",staticClass:"text-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,backgroundColor:t.val.transparent?"transparent":t.val.bgColor,opacity:t.val.opacity},attrs:{href:t.val.href,target:"_blank"}},[a("div",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",textAlign:t.val.textAlign,fontWeight:t.val.bold?"bold":"400",lineHeight:t.val.lineHeight+"px",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner",contenteditable:!t.previewing},domProps:{innerHTML:t._s(t.val.text)},on:{blur:function(e){return t.updateText(e,t.val._id)},change:function(e){return t.updateText(e,t.val._id)}}})])}),l=[],c=i("1b62"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[e.transparent?e._e():i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("水平對齊")]),i("div",{staticClass:"panel-input-wrap"},[i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-1",type:"radio",value:"left"},domProps:{checked:e._q(e.textAlign,"left")},on:{change:function(t){e.textAlign="left"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-1"}},[e._v("靠左")])]),i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-2",type:"radio",value:"center"},domProps:{checked:e._q(e.textAlign,"center")},on:{change:function(t){e.textAlign="center"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-2"}},[e._v("置中")])]),i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-3",type:"radio",value:"right"},domProps:{checked:e._q(e.textAlign,"right")},on:{change:function(t){e.textAlign="right"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-3"}},[e._v("靠右")])])])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("行高")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.lineHeight)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},"vue-slider",e.sliderOptions.lineHeight,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("粗體")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bold,expression:"bold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.bold)?e._i(e.bold,null)>-1:e.bold},on:{change:function(t){var i=e.bold,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.bold=i.concat([s])):o>-1&&(e.bold=i.slice(0,o).concat(i.slice(o+1)))}else e.bold=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("超連結")]),i("div",{staticClass:"panel-input-wrap"},[i("vue-instant",{attrs:{suggestions:e.hrefSuggestion,"suggestion-attribute":"name",placeholder:"page(#) or url",type:"google"},model:{value:e.href,callback:function(t){e.href=t},expression:"href"}})],1)])])])},u=[],p=i("4971"),f=i.n(p),v=i("1885"),g={name:"atomic-text--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{fontSize:{min:10,max:48,tooltip:"none",process:!0},height:{min:10,max:1e3,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0}},outerHref:""}},props:["widget"],computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","text","textAlign","transparent","bold","opacity","href","lineHeight"]).dispatch("updateSelectedWidget").map(),{hrefSuggestion:function(){return this.widget.href&&"#"!=this.widget.href.slice(0,1)?[]:[].concat(this.pages.map(function(e){return{name:"#"+e.title}}))}})},m=g,h=i("2877"),b=Object(h["a"])(m,d,u,!1,null,null,null),w=b.exports,C="atomic-text",x={name:C,icon:["fas","font"],title:"文字",panel:w,setting:{title:"文字",type:C,text:"預設文字",width:200,height:40,left:50,top:50,rotation:0,transformOrigin:"center center",borderRadius:0,bgColor:"#eeeeee",fontSize:16,color:"#222222",textAlign:"center",transparent:!0,bold:!1,opacity:1,href:"",lineHeight:24,animation:"",speed:1e3,delay:0,times:1,circulation:!1},mixins:[c["f"]],data:function(){return{}},props:{val:{type:Object}}},_=x,y=(i("e66b"),Object(h["a"])(_,r,l,!1,null,"9e55f9aa",null)),O=y.exports,I=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a(t.val.href&&t.previewing?"a":"div",{tag:"component",staticClass:"pic-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,backgroundColor:t.val.transparent?"transparent":t.val.bgColor,opacity:t.val.opacity},attrs:{href:t.val.href}},[a("img",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",borderRadius:t.val.borderRadius+"px",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:t.previewing?""+(t.val.circulation?"infinite":t.val.times):null},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner",src:t.val.url}})])},j=[],k=(i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),e.transparent?e._e():i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("超連結")]),i("div",{staticClass:"panel-input-wrap"},[i("vue-instant",{attrs:{suggestions:e.hrefSuggestion,"suggestion-attribute":"name",placeholder:"page(#) or url",type:"google"},model:{value:e.href,callback:function(t){e.href=t},expression:"href"}})],1)])])])}),P=[],S={name:"atomic-image--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},borderRadius:{min:0,max:40,tooltip:"none",process:!0}},dataOptions:{textAlign:[{name:"靠左",value:"left"},{name:"靠左",value:"left"},{name:"靠右",value:"right"}]}}},props:["widget"],methods:{},computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","transparent","opacity","href","borderRadius"]).dispatch("updateSelectedWidget").map(),{hrefSuggestion:function(){return this.widget.href&&"#"!=this.widget.href.slice(0,1)?[]:[].concat(this.pages.map(function(e){return{name:"#"+e.title}}))}})},W=S,z=Object(h["a"])(W,k,P,!1,null,null,null),$=z.exports,D="atomic-picture",E={name:D,icon:["far","image"],title:"圖片",panel:$,category:"picture",setting:{title:"圖片",type:D,width:200,height:40,left:0,top:0,rotation:0,transformOrigin:"center center",borderRadius:0,bgColor:"#eeeeee",transparent:!0,isUpload:!0,href:"",opacity:1,animation:"",speed:1e3,delay:0,times:1,circulation:!1},mixins:[c["f"]],data:function(){return{}},props:{val:{type:Object},pageIndex:{type:Number,default:0}}},M=E,T=(i("52b7"),Object(h["a"])(M,I,j,!1,null,"3deede18",null)),A=T.exports,H=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"text-input-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,opacity:t.val.opacity},attrs:{contenteditable:"true"}},[a("input",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",padding:"7px 10px",backgroundColor:t.val.bgColor,border:t.val.borderColor+" "+t.val.borderWidth+"px solid ",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",textAlign:"left",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{type:"text",name:t.val.text,"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner",placeholder:t.previewing?t.val.text:"",required:t.val.required},domProps:{value:t.previewing?"":t.val.text},on:{blur:function(e){return t.previewing?null:t.updateText(e,t.val._id)},input:function(e){return t.previewing?null:t.updateText(e,t.val._id)}}})])},R=[],U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.borderColor,expression:"borderColor"}],attrs:{type:"color"},domProps:{value:e.borderColor},on:{input:function(t){t.target.composing||(e.borderColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderWidth)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderWidth,callback:function(t){e.borderWidth=t},expression:"borderWidth"}},"vue-slider",e.sliderOptions.borderWidth,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("必填")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.required,expression:"required"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.required)?e._i(e.required,null)>-1:e.required},on:{change:function(t){var i=e.required,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.required=i.concat([s])):o>-1&&(e.required=i.slice(0,o).concat(i.slice(o+1)))}else e.required=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)])])])},N=[],q={name:"atomic-text-input--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{fontSize:{min:10,max:72,tooltip:"none",process:!0},borderRadius:{min:0,max:40,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},borderWidth:{min:0,max:10,tooltip:"none",process:!0},lineHeight:{min:10,max:50,tooltip:"none",process:!0}}}},props:["widget"],computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","borderRadius","borderColor","opacity","borderWidth","lineHeight","required"]).dispatch("updateSelectedWidget").map())},L=q,X=Object(h["a"])(L,U,N,!1,null,null,null),Y=X.exports,G="atomic-text-input",J={name:G,icon:["fas","inbox"],title:"文字輸入",panel:Y,category:"form",setting:{title:"文字輸入",type:G,text:"文字輸入",width:200,height:38,left:50,top:50,rotation:0,transformOrigin:"center center",fontSize:16,borderRadius:19,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",animation:"",speed:1e3,delay:0,times:1,circulation:!1},mixins:[c["f"]],props:["val"],methods:{updateText:function(e,t){var i=e.target.value;this.$store.dispatch("updateSelectedWidget",{id:t,key:"text",value:i})}}},V=J,B=(i("8540"),Object(h["a"])(V,H,R,!1,null,"84f9a58e",null)),F=B.exports,K=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"radio-input-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,opacity:t.val.opacity}},[a("div",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",padding:"7px 10px",backgroundColor:t.val.bgColor,border:t.val.borderColor+" "+t.val.borderWidth+"px solid",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",lineHeight:t.val.lineHeight+"px",textAlign:"left",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{name:t.val.text,"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner"},on:{mousedown:function(e){e.stopPropagation()}}},[a("div",{staticClass:"pb-2",attrs:{contenteditable:!t.previewing},domProps:{innerHTML:t._s(t.val.text)},on:{blur:function(e){return e.stopPropagation(),function(e){return t.updateText(e,t.val._id)}(e)},change:function(e){return e.stopPropagation(),function(e){return t.updateText(e,t.val._id)}(e)}}}),t._l(t.val.answerOptions,function(e,i){return a("div",{key:e+"-"+i},[a("option-item",{attrs:{val:t.val,option:e,oId:i}})],1)})],2),t.editing||t.previewing?t._e():a("div",{staticClass:"widget-cover",style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"cover"}})])},Q=[],Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("行高")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.lineHeight)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},"vue-slider",e.sliderOptions.lineHeight,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.borderColor,expression:"borderColor"}],attrs:{type:"color"},domProps:{value:e.borderColor},on:{input:function(t){t.target.composing||(e.borderColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderWidth)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderWidth,callback:function(t){e.borderWidth=t},expression:"borderWidth"}},"vue-slider",e.sliderOptions.borderWidth,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("必填")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.required,expression:"required"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.required)?e._i(e.required,null)>-1:e.required},on:{change:function(t){var i=e.required,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.required=i.concat([s])):o>-1&&(e.required=i.slice(0,o).concat(i.slice(o+1)))}else e.required=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[i("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return e.addAnswerOption()}}},[e._v("\n          新增選項\n        ")])])])])])},ee=[],te=i("75fc"),ie={name:"atomic-radio-input--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{fontSize:{min:10,max:32,tooltip:"none",process:!0},borderRadius:{min:0,max:40,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},borderWidth:{min:0,max:10,tooltip:"none",process:!0},lineHeight:{min:10,max:50,tooltip:"none",process:!0}}}},props:["widget"],methods:{addAnswerOption:function(){var e=[].concat(Object(te["a"])(this.widget.answerOptions),["option-".concat(this.widget.answerOptions.length+1)]);this.$store.dispatch("updateSelectedWidget",{key:"answerOptions",value:e})}},computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","borderRadius","borderColor","opacity","borderWidth","lineHeight","required"]).dispatch("updateSelectedWidget").map())},ae=ie,ne=Object(h["a"])(ae,Z,ee,!1,null,null,null),se=ne.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"position-relative d-flex justify-content-between py-1"},[i("div",{style:{minWidth:"50%"},attrs:{contenteditable:!e.previewing},domProps:{innerHTML:e._s(e.option)},on:{blur:function(t){return e.updateOption(t,e.val._id)},change:function(t){return e.updateOption(t,e.val._id)}}}),i("input",{attrs:{type:"radio",id:e.val._id+"-"+e.oId,name:e.val.text,disabled:!e.previewing,required:0===e.oId&&e.val.required},domProps:{value:e.option}}),e.previewing?e._e():i("button",{staticClass:"position-absolute btn btn-danger btn-sm",style:{left:"calc(100%)",top:"0px"},on:{click:function(t){return e.deleteOption(e.oId)}}},[i("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)])},re=[],le=i("2f62"),ce={name:"optionItem",data:function(){return{}},props:["val","option","oId"],computed:Object(s["a"])({},Object(le["d"])({previewing:function(e){return e.previewing}})),methods:{updateOption:function(e,t){var i=e.target.innerHTML;this.$store.dispatch("updateSelectedWidget",{id:this.val._id,index:this.oId,key:"answerOptions",value:i})},deleteOption:function(e){var t=this.val.answerOptions.filter(function(t,i){return i!==e});this.$store.dispatch("updateSelectedWidget",{id:this.val._id,key:"answerOptions",value:t})}}},de=ce,ue=(i("29eb"),Object(h["a"])(de,oe,re,!1,null,"03f731ba",null)),pe=ue.exports,fe="atomic-radio-input",ve={name:fe,icon:["fas","dot-circle"],title:"單選選項",panel:se,category:"form",setting:{title:"單選選項",type:fe,text:"單選問題，請選擇：",width:200,height:140,left:50,top:50,rotation:0,transformOrigin:"center center",fontSize:16,borderRadius:19,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",answerOptions:["select-1","select-2","select-3"],animation:"",speed:1e3,delay:0,times:1,circulation:!1},components:{optionItem:pe},mixins:[c["f"]],props:["val"]},ge=ve,me=(i("ee2e"),Object(h["a"])(ge,K,Q,!1,null,null,null)),he=me.exports,be=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"checkbox-input-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,opacity:t.val.opacity}},[a("div",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",padding:"7px 10px",backgroundColor:t.val.bgColor,border:t.val.borderColor+" "+t.val.borderWidth+"px solid",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",lineHeight:t.val.lineHeight+"px",textAlign:"left",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{type:"text",name:t.val.text,"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner"},on:{mousedown:function(e){e.stopPropagation()}}},[a("div",{staticClass:"pb-2",attrs:{contenteditable:!t.previewing},domProps:{innerHTML:t._s(t.val.text)},on:{blur:function(e){return e.stopPropagation(),function(e){return t.updateText(e,t.val._id)}(e)},change:function(e){return e.stopPropagation(),function(e){return t.updateText(e,t.val._id)}(e)}}}),t._l(t.val.answerOptions,function(e,i){return a("div",{key:e+"-"+i},[a("option-item",{attrs:{val:t.val,option:e,oId:i}})],1)})],2),t.editing||t.previewing?t._e():a("div",{staticClass:"widget-cover",style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"cover"}})])},we=[],Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("行高")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.lineHeight)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},"vue-slider",e.sliderOptions.lineHeight,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.borderColor,expression:"borderColor"}],attrs:{type:"color"},domProps:{value:e.borderColor},on:{input:function(t){t.target.composing||(e.borderColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderWidth)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderWidth,callback:function(t){e.borderWidth=t},expression:"borderWidth"}},"vue-slider",e.sliderOptions.borderWidth,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("必填")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.required,expression:"required"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.required)?e._i(e.required,null)>-1:e.required},on:{change:function(t){var i=e.required,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.required=i.concat([s])):o>-1&&(e.required=i.slice(0,o).concat(i.slice(o+1)))}else e.required=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[i("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return e.addAnswerOption()}}},[e._v("\n          新增選項\n        ")])])])])])},xe=[],_e={name:"atomic-check-box--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{fontSize:{min:10,max:32,tooltip:"none",process:!0},borderRadius:{min:0,max:40,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},borderWidth:{min:0,max:10,tooltip:"none",process:!0},lineHeight:{min:10,max:50,tooltip:"none",process:!0}}}},props:["widget"],methods:{addAnswerOption:function(){var e=[].concat(Object(te["a"])(this.widget.answerOptions),["option-".concat(this.widget.answerOptions.length+1)]);this.$store.dispatch("updateSelectedWidget",{key:"answerOptions",value:e})}},computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","borderRadius","borderColor","opacity","borderWidth","lineHeight","required"]).dispatch("updateSelectedWidget").map())},ye=_e,Oe=Object(h["a"])(ye,Ce,xe,!1,null,null,null),Ie=Oe.exports,je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"position-relative d-flex justify-content-between py-1"},[i("div",{style:{minWidth:"50%"},attrs:{contenteditable:!e.previewing},domProps:{innerHTML:e._s(e.option)},on:{blur:function(t){return e.updateOption(t,e.val._id)},change:function(t){return e.updateOption(t,e.val._id)}}}),i("input",{attrs:{type:"checkbox",id:e.val._id+"-"+e.oId,name:""+e.val.text,disabled:!e.previewing,required:0===e.oId&&e.val.required},domProps:{value:e.option}}),e.previewing?e._e():i("button",{staticClass:"position-absolute btn btn-danger btn-sm",style:{left:"calc(100%)",top:"0px"},on:{click:function(t){return e.deleteOption(e.oId)}}},[i("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)])},ke=[],Pe={name:"optionItem",data:function(){return{}},props:["val","option","oId"],computed:Object(s["a"])({},Object(le["d"])({previewing:function(e){return e.previewing}})),methods:{updateOption:function(e,t){var i=e.target.innerHTML;this.$store.dispatch("updateSelectedWidget",{id:this.val._id,index:this.oId,key:"answerOptions",value:i})},deleteOption:function(e){var t=this.val.answerOptions.filter(function(t,i){return i!==e});this.$store.dispatch("updateSelectedWidget",{id:this.val._id,key:"answerOptions",value:t})}}},Se=Pe,We=(i("4371"),Object(h["a"])(Se,je,ke,!1,null,"1de8c57c",null)),ze=We.exports,$e="atomic-checkbox-input",De={name:$e,icon:["fas","check-square"],title:"多選選項",panel:Ie,category:"form",setting:{title:"多選選項",type:$e,text:"多選問題，請選擇：",width:200,height:140,left:50,top:50,rotation:0,transformOrigin:"center center",fontSize:16,borderRadius:19,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,opacity:1,required:!1,placeholder:"文字欄位",answerOptions:["select-1","select-2","select-3"],animation:"",speed:1e3,delay:0,times:1,circulation:!1},components:{optionItem:ze},mixins:[c["f"]],props:["val"]},Ee=De,Me=(i("a529"),Object(h["a"])(Ee,be,we,!1,null,null,null)),Te=Me.exports,Ae=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"submit-button-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,opacity:t.val.opacity}},[a("button",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",padding:"0px 10px",backgroundColor:t.val.bgColor,border:t.val.borderColor+" "+t.val.borderWidth+"px solid ",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",textAlign:t.val.textAlign,fontWeight:t.val.bold?"bold":"400",lineHeight:t.val.lineHeight+"px",outline:"none",animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner",type:"submit",contenteditable:!t.previewing},domProps:{innerHTML:t._s(t.val.text)},on:{blur:function(e){return t.updateText(e,t.val._id)},change:function(e){return t.updateText(e,t.val._id)}}})])},He=[],Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[e.transparent?e._e():i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("行高")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.lineHeight)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},"vue-slider",e.sliderOptions.lineHeight,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.borderColor,expression:"borderColor"}],attrs:{type:"color"},domProps:{value:e.borderColor},on:{input:function(t){t.target.composing||(e.borderColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("框線大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderWidth)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderWidth,callback:function(t){e.borderWidth=t},expression:"borderWidth"}},"vue-slider",e.sliderOptions.borderWidth,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("粗體")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bold,expression:"bold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.bold)?e._i(e.bold,null)>-1:e.bold},on:{change:function(t){var i=e.bold,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.bold=i.concat([s])):o>-1&&(e.bold=i.slice(0,o).concat(i.slice(o+1)))}else e.bold=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)])])])},Ue=[],Ne={name:"atomic-submit-button--style",components:{VueSlider:f.a},data:function(){return{sliderOptions:{fontSize:{min:10,max:48,tooltip:"none",process:!0},height:{min:10,max:1e3,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},borderWidth:{min:0,max:10,tooltip:"none",process:!0},lineHeight:{min:10,max:50,tooltip:"none",process:!0}}}},props:["widget"],methods:{},computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","text","textAlign","transparent","borderRadius","borderColor","borderWidth","lineHeight","bold","opacity"]).dispatch("updateSelectedWidget").map())},qe=Ne,Le=Object(h["a"])(qe,Re,Ue,!1,null,null,null),Xe=Le.exports,Ye="atomic-submit-button",Ge={name:Ye,icon:["fas","share-square"],title:"提交按鈕",panel:Xe,category:"form",setting:{title:"提交按鈕",type:Ye,text:"送出",width:200,height:38,left:50,top:50,rotation:0,transformOrigin:"center center",fontSize:16,borderRadius:19,bgColor:"#ffffff",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,bold:!1,opacity:1,animation:"",speed:1e3,delay:0,times:1,circulation:!1},mixins:[c["f"]],data:function(){return{}},props:{val:{type:Object}}},Je=Ge,Ve=(i("17ba"),Object(h["a"])(Je,Ae,He,!1,null,"33d151e8",null)),Be=Ve.exports,Fe=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a(t.val.href&&t.previewing?"a":"div",{tag:"component",staticClass:"href-button-widget",class:{editing:t.editing&&t.val._id==t.selectedId,ghost:t.editing&&t.val._id!=t.selectedId},style:{zIndex:t.editing&&t.val._id==t.selectedId?2:0,position:"absolute",left:t.val.left+"px",top:t.val.top+"px",width:t.val.width+"px",height:t.val.height+"px",transform:"rotate("+t.val.rotation+"deg)",transformOrigin:t.val.transformOrigin,opacity:t.val.opacity},attrs:{href:t.val.href,target:"_blank"}},[a("div",{staticClass:"widget-inner",class:(e={},e[t.val.animation]=t.currentPreview,e["animated"]=t.animatedClass,e["infinite"]=t.val.circulation,e),style:{left:"0px",top:"0px",width:"100%",height:"100%",borderRadius:t.val.borderRadius+"px",color:t.val.color,fontSize:t.val.fontSize+"px",textAlign:t.val.textAlign,fontWeight:t.val.bold?"bold":"400",lineHeight:t.val.lineHeight+"px",border:t.val.borderColor+" "+t.val.borderWidth+"px solid ",backgroundColor:t.val.transparent?"transparent":t.val.bgColor,animationDuration:t.val.speed/1e3+"s",animationDelay:t.previewing?t.val.delay/1e3+"s":null,animationIterationCount:""+(t.previewing&&t.val.circulation?"infinite":t.val.times)},attrs:{"data-id":t.val._id,"data-group-id":t.val.groupId,"data-type":"inner",contenteditable:!t.previewing},domProps:{innerHTML:t._s(t.val.text)},on:{blur:function(e){return t.updateText(e,t.val._id)},change:function(e){return t.updateText(e,t.val._id)}}})])},Ke=[],Qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("ul",{staticClass:"style-list"},[i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("透明背景")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.transparent,expression:"transparent"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.transparent)?e._i(e.transparent,null)>-1:e.transparent},on:{change:function(t){var i=e.transparent,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.transparent=i.concat([s])):o>-1&&(e.transparent=i.slice(0,o).concat(i.slice(o+1)))}else e.transparent=n}}})])]),e.transparent?e._e():i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("背景色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.bgColor)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bgColor,expression:"bgColor"}],attrs:{type:"color"},domProps:{value:e.bgColor},on:{input:function(t){t.target.composing||(e.bgColor=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體大小")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.fontSize)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},"vue-slider",e.sliderOptions.fontSize,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("字體顏色")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.color)+" ")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"color"},domProps:{value:e.color},on:{input:function(t){t.target.composing||(e.color=t.target.value)}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("圓角")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.borderRadius)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}},"vue-slider",e.sliderOptions.borderRadius,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("水平對齊")]),i("div",{staticClass:"panel-input-wrap"},[i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-1",type:"radio",value:"left"},domProps:{checked:e._q(e.textAlign,"left")},on:{change:function(t){e.textAlign="left"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-1"}},[e._v("靠左")])]),i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-2",type:"radio",value:"center"},domProps:{checked:e._q(e.textAlign,"center")},on:{change:function(t){e.textAlign="center"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-2"}},[e._v("置中")])]),i("label",{staticClass:"form-check form-check-inline",attrs:{for:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textAlign,expression:"textAlign"}],staticClass:"form-check-input",attrs:{id:"text-align-3",type:"radio",value:"right"},domProps:{checked:e._q(e.textAlign,"right")},on:{change:function(t){e.textAlign="right"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"text-align-3"}},[e._v("靠右")])])])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("行高")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(e.lineHeight)+" ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},"vue-slider",e.sliderOptions.lineHeight,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("粗體")]),i("div",{staticClass:"panel-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bold,expression:"bold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.bold)?e._i(e.bold,null)>-1:e.bold},on:{change:function(t){var i=e.bold,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.bold=i.concat([s])):o>-1&&(e.bold=i.slice(0,o).concat(i.slice(o+1)))}else e.bold=n}}})])]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("不透明度")]),i("div",{staticClass:"panel-value"},[e._v(" "+e._s(Math.round(100*e.opacity))+"% ")]),i("div",{staticClass:"panel-slider-wrap"},[i("vue-slider",e._b({model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}},"vue-slider",e.sliderOptions.opacity,!1))],1)]),i("li",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"panel-label"},[e._v("超連結")]),i("div",{staticClass:"panel-input-wrap"},[i("vue-instant",{attrs:{suggestions:e.hrefSuggestion,"suggestion-attribute":"name",minMatch:0,placeholder:"page(#) or url",type:"google"},model:{value:e.href,callback:function(t){e.href=t},expression:"href"}})],1)])])])},Ze=[],et={name:"atomic-href-button--style",components:{VueSlider:f.a},data:function(){return{outerHref:""}},props:["widget"],computed:Object(s["a"])({},Object(v["take"])("widget").expose(["bgColor","fontSize","color","text","textAlign","transparent","bold","opacity","href","lineHeight","borderRadius"]).dispatch("updateSelectedWidget").map(),{hrefSuggestion:function(){return this.widget.href&&"#"!=this.widget.href.slice(0,1)?[]:[].concat(this.pages.map(function(e){return{name:"#"+e.title}}))},sliderOptions:function(){return{fontSize:{min:10,max:48,tooltip:"none",process:!0},height:{min:10,max:1e3,tooltip:"none",process:!0},opacity:{min:0,max:1,interval:.01,tooltip:"none",process:!0},lineHeight:{min:0,max:2*this.widget.height,interval:1,tooltip:"none",process:!0}}}})},tt=et,it=Object(h["a"])(tt,Qe,Ze,!1,null,null,null),at=it.exports,nt="atomic-href-button",st={name:nt,icon:["fas","link"],title:"連結按鈕",panel:at,setting:(a={title:"連結按鈕",type:nt,text:"連結按鈕",width:200,height:40,left:50,top:50,rotation:0,transformOrigin:"center center",textAlign:"center",transparent:!1,fontSize:16,borderRadius:19,bgColor:"#b7beba",borderColor:"#dddddd",borderWidth:3,color:"#222222",lineHeight:20,bold:!1,opacity:1,href:""},Object(o["a"])(a,"lineHeight",35),Object(o["a"])(a,"animation",""),Object(o["a"])(a,"speed",1e3),Object(o["a"])(a,"delay",0),Object(o["a"])(a,"times",1),Object(o["a"])(a,"circulation",!1),a),mixins:[c["f"]],data:function(){return{}},props:{val:{type:Object}}},ot=st,rt=Object(h["a"])(ot,Fe,Ke,!1,null,"5dd494f0",null),lt=rt.exports;i.d(t,"b",function(){return dt});var ct=(n={},Object(o["a"])(n,O.name,O),Object(o["a"])(n,A.name,A),Object(o["a"])(n,F.name,F),Object(o["a"])(n,he.name,he),Object(o["a"])(n,Te.name,Te),Object(o["a"])(n,Be.name,Be),Object(o["a"])(n,lt.name,lt),n),dt={};Object.keys(ct).forEach(function(e){if(ct[e]["panel"]){var t=Object(s["a"])({},ct[e]["panel"],{type:e});dt[t.name]=t,delete ct[e]["panel"]}});t["a"]=ct},cd20:function(e,t,i){},ce96:function(e,t,i){"use strict";var a=Math.PI/180,n=180/Math.PI;function s(e){return Math.sin(e*a)}function o(e){return Math.cos(e*a)}function r(e,t){return Math.atan2(e,t)*n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.pow(e,t)}function c(e,t){return Math.sqrt(l(e)+l(t))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=Math.round(Math.random()*Math.pow(10,e));return u(t,6)}function u(e,t){return e.length>=t?e+"":u("0"+e,t)}function p(e,t){var i=e.left,a=e.top,n=e.height,s=e.width,o=a+n,r=i+s,l=t.left,c=t.top,d=t.height,u=t.width,p=c+d,f=l+u;return!(o<c||a>p||r<l||i>f)}function f(e){var t,i,a=e.left,n=e.top,l=e.width,d=e.height,u=e.rotation,p=e.transformOrigin,f=a+l/2,v=n+d/2,g=c(l/2,d/2),m=u%180<90?r(d,l):r(l,d),h=m-u%90,b=m+u%90,w=g*o(h)*2,C=g*s(b)*2;if("left top"==p){var x=r(l/2,d/2)-u,_=c(l/2,d/2),y=Math.round(a-w/2+_*s(x)),O=Math.round(n-C/2+_*o(x));t=y,i=O}else t=f-w/2,i=v-C/2;return{width:w,height:C,left:t,top:i}}function v(e,t){e=e||{left:0,top:0,width:0,height:0};var i=f(t),a=e.left?Math.min(e.left,i.left):i.left,n=e.top?Math.min(e.top,i.top):i.top,s=Math.max(e.left+e.width,i.left+i.width)-a,o=Math.max(e.top+e.height,i.top+i.height)-n;return{left:a,top:n,width:s,height:o}}i.d(t,"f",function(){return s}),i.d(t,"b",function(){return o}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return c}),i.d(t,"e",function(){return d}),i.d(t,"h",function(){return p}),i.d(t,"g",function(){return f}),i.d(t,"c",function(){return v})},e051:function(e,t,i){"use strict";var a=i("8458"),n=i.n(a);n.a},e66b:function(e,t,i){"use strict";var a=i("7da1"),n=i.n(a);n.a},e80e:function(e,t,i){},ebfa:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("d225"),n=i("b0b4"),s=i("a078"),o=s["a"].debug,r=function(){function e(t){Object(a["a"])(this,e),this.logPrefix=t||""}return Object(n["a"])(e,[{key:"log",get:function(){if(!o)return function(){};var e=this.logPrefix;return e.length?console.log.bind(window.console,e+": "):console.log.bind(window.console)}},{key:"warn",get:function(){if(!o)return function(){};var e=this.logPrefix;return e.length?console.warn.bind(window.console,e+": "):console.warn.bind(window.console)}},{key:"error",get:function(){if(!o)return function(){};var e=this.logPrefix;return e.length?console.error.bind(window.console,e+": "):console.error.bind(window.console)}}]),e}()},ee2e:function(e,t,i){"use strict";var a=i("cd20"),n=i.n(a);n.a}});
//# sourceMappingURL=app.b7248db7.js.map